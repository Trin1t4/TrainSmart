import{j as e,D as v,O as A,a4 as z,a5 as Q,V as w,r as j,a as C,X as N,a8 as _,a9 as E,G as R,e as O,C as B,g as D,B as k,aa as M,A as I}from"./vendor-ui-B5xs3EUI.js";import{a as d,u as L}from"./vendor-react-DLKD8xKB.js";import{u as T,a as $,s as F}from"./index-CsHuaFST.js";import"./vendor-supabase-DF1H9KNm.js";const Z=[{key:"benchPress",label:"Panca Piana",icon:"üèãÔ∏è",pattern:"horizontal_push",description:"Distensioni su panca con bilanciere"},{key:"squat",label:"Squat",icon:"ü¶µ",pattern:"lower_push",description:"Squat con bilanciere"},{key:"deadlift",label:"Stacco",icon:"üí™",pattern:"lower_pull",description:"Stacco da terra"},{key:"militaryPress",label:"Military Press",icon:"üèãÔ∏è",pattern:"vertical_push",description:"Distensioni sopra la testa"}],V=[{key:"latPulldown",label:"LAT Machine",icon:"‚¨áÔ∏è",pattern:"vertical_pull",description:"Tirate al lat machine"},{key:"seatedRow",label:"Pulley",icon:"‚û°Ô∏è",pattern:"horizontal_pull",description:"Rematore ai cavi"}],U=[{key:"chestPress",label:"Chest Press",icon:"üî≤",pattern:"horizontal_push",description:"Alternativa alla panca per neofiti"},{key:"legPress",label:"Pressa",icon:"ü¶µ",pattern:"lower_push",description:"Alternativa allo squat per neofiti"},{key:"shoulderPress",label:"Shoulder Press",icon:"‚¨ÜÔ∏è",pattern:"vertical_push",description:"Alternativa al military per neofiti"}];function y({exercise:o,value:l,onChange:m,showRepMax:p=!0}){var f;const[c,i]=d.useState(((f=l==null?void 0:l.weight)==null?void 0:f.toString())||""),[u,x]=d.useState((l==null?void 0:l.repMax)||5),[b,h]=d.useState(!1),n=g=>{const t=g.target.value;if(i(t),t===""||t==="0")m(void 0);else{const s=parseFloat(t);!isNaN(s)&&s>0&&m({weight:s,repMax:u})}},r=g=>{x(g),c&&parseFloat(c)>0&&m({weight:parseFloat(c),repMax:g})};return e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700 hover:border-slate-600 transition",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:o.label}),e.jsxs("button",{type:"button",onClick:()=>h(!b),className:"text-xs text-slate-400 hover:text-slate-300 flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"}),b?"Nascondi":"Info"]})]})]}),(l==null?void 0:l.weight)&&e.jsx(C,{className:"w-5 h-5 text-emerald-400"})]}),e.jsx(w,{children:b&&e.jsx(j.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-xs text-slate-400 mb-3 bg-slate-700/50 p-2 rounded",children:o.description})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"number",min:"0",step:"2.5",value:c,onChange:n,placeholder:"kg",className:"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2 text-lg font-mono focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition"})}),p&&e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{type:"button",onClick:()=>r(1),className:`px-3 py-2 rounded-lg text-sm font-semibold transition ${u===1?"bg-emerald-500 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:"1RM"}),e.jsx("button",{type:"button",onClick:()=>r(5),className:`px-3 py-2 rounded-lg text-sm font-semibold transition ${u===5?"bg-emerald-500 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:"5RM"})]})]})]})}function W({initialData:o,onSave:l,onSkip:m,showSkip:p=!0,compact:c=!1}){const[i,u]=d.useState(o||{}),[x,b]=d.useState(!1),[h,n]=d.useState(!1),r=(s,a)=>{u(S=>{if(a===void 0){const{[s]:J,...P}=S;return P}return{...S,[s]:a}})},f=async()=>{n(!0);const s={...i,updatedAt:new Date().toISOString(),source:"user_input"};await new Promise(a=>setTimeout(a,300)),l(s),n(!1)},g=Object.keys(i).some(s=>!["updatedAt","source"].includes(s)&&i[s]),t=Object.keys(i).filter(s=>!["updatedAt","source"].includes(s)&&i[s]).length;return e.jsxs("div",{className:`${c?"space-y-4":"space-y-6"}`,children:[!c&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"w-8 h-8 text-orange-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Conosci i tuoi massimali?"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Se sai quanto sollevi, inseriscilo qui. Il sistema calibrer√† i carichi automaticamente."})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-200",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Non sai i tuoi massimali?"}),e.jsx("p",{className:"text-blue-300/80",children:"Nessun problema! Salta questo passaggio e li testeremo insieme alla prima seduta."})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üèãÔ∏è"})," Bilanciere"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Z.map(s=>e.jsx(y,{exercise:s,value:i[s.key],onChange:a=>r(s.key,a),showRepMax:!0},s.key))})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üîó"})," Cavi / Pulley"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:V.map(s=>e.jsx(y,{exercise:s,value:i[s.key],onChange:a=>r(s.key,a),showRepMax:!1},s.key))})]}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>b(!x),className:"w-full flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700 hover:border-slate-600 transition",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"üî≤"}),e.jsx("span",{className:"font-semibold text-white",children:"Macchine"}),e.jsx("span",{className:"text-xs text-slate-400",children:"(per chi preferisce)"})]}),x?e.jsx(z,{className:"w-5 h-5 text-slate-400"}):e.jsx(Q,{className:"w-5 h-5 text-slate-400"})]}),e.jsx(w,{children:x&&e.jsx(j.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3",children:U.map(s=>e.jsx(y,{exercise:s,value:i[s.key],onChange:a=>r(s.key,a),showRepMax:!1},s.key))})}),!x&&e.jsx("p",{className:"text-xs text-slate-500 mt-2 ml-1",children:"Se non usi il bilanciere, clicca qui per inserire i massimali alle macchine"})]}),g&&e.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-emerald-400"}),e.jsxs("span",{className:"text-emerald-300 font-semibold",children:[t," massimali inseriti"]})]}),e.jsx("span",{className:"text-xs text-emerald-400/70",children:"I carichi verranno calcolati automaticamente"})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[p&&m&&e.jsxs("button",{type:"button",onClick:m,className:"flex-1 bg-slate-700 text-slate-300 py-4 rounded-lg font-semibold text-lg hover:bg-slate-600 transition flex items-center justify-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"Non li conosco"]}),e.jsx("button",{type:"button",onClick:f,disabled:h,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-4 rounded-lg font-semibold text-lg shadow-lg shadow-emerald-500/20 hover:from-emerald-600 hover:to-emerald-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Salvataggio..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"w-5 h-5"}),g?"Salva massimali":"Continua senza"]})})]})]})}const X=[{id:"maximals",title:"Massimali",description:"Inserisci i tuoi carichi massimi per calibrare il programma",time:"2 min",icon:e.jsx(v,{className:"w-6 h-6"}),color:"text-orange-400",bgColor:"bg-orange-500/20",borderColor:"border-orange-500/50"},{id:"running",title:"Running",description:"Aggiungi la corsa al tuo programma di allenamento",time:"2 min",icon:e.jsx(I,{className:"w-6 h-6"}),color:"text-blue-400",bgColor:"bg-blue-500/20",borderColor:"border-blue-500/50"},{id:"bodyMeasures",title:"Misure Corpo",description:"Traccia la composizione corporea con Navy Method",time:"2 min",icon:e.jsx(M,{className:"w-6 h-6"}),color:"text-purple-400",bgColor:"bg-purple-500/20",borderColor:"border-purple-500/50"},{id:"biomechanics",title:"Quiz Biomeccanico",description:"Migliora la precisione del programma con un test teorico",time:"5 min",icon:e.jsx(k,{className:"w-6 h-6"}),color:"text-emerald-400",bgColor:"bg-emerald-500/20",borderColor:"border-emerald-500/50"}];function te(){const o=L(),{t:l}=T(),{user:m}=$(),[p,c]=d.useState(null),[i,u]=d.useState(new Set),[x,b]=d.useState(!1),h=async(t,s)=>{if(!(!t||!m))try{t==="maximals"&&s&&await n(s),u(a=>new Set([...a,t])),c(null)}catch(a){console.error(`[OPTIONAL_QUIZZES] Error saving ${t}:`,a)}},n=async t=>{if(!m)return;const{error:s}=await F.from("user_profiles").update({maximals:t,updated_at:new Date().toISOString()}).eq("user_id",m.id);if(s)throw console.error("[OPTIONAL_QUIZZES] Error saving maximals:",s),s;console.log("[OPTIONAL_QUIZZES] Maximals saved")},r=()=>{c(null)},f=async()=>{b(!0),await new Promise(t=>setTimeout(t,500)),o("/dashboard")},g=()=>{switch(p){case"maximals":return e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-800/50 backdrop-blur-lg rounded-2xl p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(v,{className:"w-6 h-6 text-orange-400"}),"Inserisci i tuoi massimali"]}),e.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-white transition",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsx(W,{onSave:t=>h("maximals",t),onSkip:r,showSkip:!0,compact:!0})]});case"running":return e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-800/50 backdrop-blur-lg rounded-2xl p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(I,{className:"w-6 h-6 text-blue-400"}),"Aggiungi Running"]}),e.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-white transition",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsx(H,{onComplete:()=>h("running"),onSkip:r})]});case"bodyMeasures":return e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-800/50 backdrop-blur-lg rounded-2xl p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(M,{className:"w-6 h-6 text-purple-400"}),"Misure Corporee"]}),e.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-white transition",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsx(G,{onComplete:()=>h("bodyMeasures"),onSkip:r})]});case"biomechanics":return e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-slate-800/50 backdrop-blur-lg rounded-2xl p-6 border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(k,{className:"w-6 h-6 text-emerald-400"}),"Quiz Biomeccanico"]}),e.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-white transition",children:e.jsx(N,{className:"w-5 h-5"})})]}),e.jsx(q,{onComplete:()=>h("biomechanics"),onSkip:r})]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-8 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(j.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"w-20 h-20 bg-gradient-to-br from-emerald-500/30 to-blue-500/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(R,{className:"w-10 h-10 text-emerald-400"})}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Programma pronto!"}),e.jsx("p",{className:"text-slate-400",children:"Vuoi personalizzare ancora di pi√π? Questi quiz sono facoltativi."})]}),e.jsx(w,{mode:"wait",children:p&&e.jsx("div",{className:"mb-8",children:g()})}),!p&&e.jsx("div",{className:"space-y-4 mb-8",children:X.map((t,s)=>{const a=i.has(t.id);return e.jsxs(j.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:s*.1},onClick:()=>!a&&c(t.id),disabled:a,className:`w-full p-4 rounded-xl border-2 transition-all text-left flex items-center gap-4 ${a?"border-emerald-500/50 bg-emerald-500/10 cursor-default":`${t.borderColor} ${t.bgColor} hover:bg-opacity-30 cursor-pointer`}`,children:[e.jsx("div",{className:`p-3 rounded-lg ${a?"bg-emerald-500/20":t.bgColor}`,children:a?e.jsx(C,{className:"w-6 h-6 text-emerald-400"}):e.jsx("span",{className:t.color,children:t.icon})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:`font-semibold ${a?"text-emerald-300":"text-white"}`,children:t.title}),a&&e.jsx("span",{className:"text-xs bg-emerald-500/30 text-emerald-300 px-2 py-0.5 rounded-full",children:"Completato"})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-slate-500 text-sm",children:[e.jsx(O,{className:"w-4 h-4"}),t.time]}),!a&&e.jsx(B,{className:"w-5 h-5 text-slate-500"})]})]},t.id)})}),!p&&e.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx("button",{onClick:f,disabled:x,className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-emerald-500/30 hover:from-emerald-600 hover:to-emerald-700 transition disabled:opacity-70 flex items-center justify-center gap-3",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Preparazione..."]}):e.jsxs(e.Fragment,{children:[i.size>0?"Vai al programma":"Salta e vai al programma",e.jsx(D,{className:"w-5 h-5"})]})}),e.jsx("p",{className:"text-center text-slate-500 text-sm mt-4",children:"Puoi sempre completare questi quiz dal tuo profilo"})]})]})})}function H({onComplete:o,onSkip:l}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-blue-200",children:"Qui verr√† integrato il RunningOnboarding esistente per raccogliere:"}),e.jsxs("ul",{className:"text-blue-300/80 text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Livello attuale di corsa"}),e.jsx("li",{children:"‚Ä¢ Obiettivo running"}),e.jsx("li",{children:"‚Ä¢ Integrazione con allenamento pesi"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"flex-1 bg-slate-700 text-slate-300 py-3 rounded-lg font-semibold hover:bg-slate-600 transition",children:"Salta"}),e.jsx("button",{onClick:o,className:"flex-1 bg-blue-500 text-white py-3 rounded-lg font-semibold hover:bg-blue-600 transition",children:"Simula completamento"})]})]})}function G({onComplete:o,onSkip:l}){const[m,p]=d.useState(""),[c,i]=d.useState(""),[u,x]=d.useState(""),[b,h]=d.useState("");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{className:"text-slate-400 text-sm",children:"Inserisci le tue misure per calcolare la composizione corporea con il Navy Method."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Altezza (cm)"}),e.jsx("input",{type:"number",value:b,onChange:n=>h(n.target.value),placeholder:"170",className:"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Collo (cm)"}),e.jsx("input",{type:"number",value:m,onChange:n=>p(n.target.value),placeholder:"38",className:"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Vita (cm)"}),e.jsx("input",{type:"number",value:c,onChange:n=>i(n.target.value),placeholder:"85",className:"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-1",children:"Fianchi (cm)"}),e.jsx("input",{type:"number",value:u,onChange:n=>x(n.target.value),placeholder:"95",className:"w-full bg-slate-700 border border-slate-600 text-white rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"flex-1 bg-slate-700 text-slate-300 py-3 rounded-lg font-semibold hover:bg-slate-600 transition",children:"Salta"}),e.jsx("button",{onClick:o,className:"flex-1 bg-purple-500 text-white py-3 rounded-lg font-semibold hover:bg-purple-600 transition",children:"Salva misure"})]})]})}function q({onComplete:o,onSkip:l}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-emerald-200",children:"Qui verr√† integrato il Quiz Biomeccanico esistente:"}),e.jsxs("ul",{className:"text-emerald-300/80 text-sm mt-2 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Domande su mobilit√† e flessibilit√†"}),e.jsx("li",{children:"‚Ä¢ Valutazione conoscenze tecniche"}),e.jsx("li",{children:"‚Ä¢ Identificazione punti deboli"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"flex-1 bg-slate-700 text-slate-300 py-3 rounded-lg font-semibold hover:bg-slate-600 transition",children:"Salta"}),e.jsx("button",{onClick:o,className:"flex-1 bg-emerald-500 text-white py-3 rounded-lg font-semibold hover:bg-emerald-600 transition",children:"Inizia quiz"})]})]})}export{te as default};
