const f={advanced:75,intermediate:55};function d(e,t=f){if(e==null||isNaN(e))return"beginner";const a=Math.max(0,Math.min(100,e));return a>=t.advanced?"advanced":a>=t.intermediate?"intermediate":"beginner"}function M(e,t=50,a=50,r=!1){const n=t*.2+e*.6+a*.2,i=d(n);return r?{level:i,finalScore:Math.round(n*10)/10,machinePreference:!0,note:"Preferenza macchine registrata. Il programma userà principalmente macchine guidate."}:{level:i,finalScore:Math.round(n*10)/10,machinePreference:!1}}function y(e,t){const a=Math.abs(e-t);return a<25?{hasDiscrepancy:!1,type:"balanced",quizScore:e,practicalScore:t,gap:a,feedback:"Buon bilanciamento tra conoscenza teorica e capacità pratica."}:e>t?{hasDiscrepancy:!0,type:"theory_practice_gap",quizScore:e,practicalScore:t,gap:a,feedback:`Conosci bene la teoria (${e}%) ma la pratica è indietro (${Math.round(t)}%). Focus: più pratica, meno studio. Il corpo impara facendo!`}:{hasDiscrepancy:!0,type:"intuitive_mover",quizScore:e,practicalScore:t,gap:a,feedback:`Ti muovi bene istintivamente (${Math.round(t)}%) ma la teoria è debole (${e}%). Focus: impara i principi base per evitare errori tecnici.`}}const u={essential:{max:5,label:"Essential Fat",labelIt:"Grasso Essenziale"},athlete:{max:13,label:"Athlete",labelIt:"Atleta"},fitness:{max:17,label:"Fitness",labelIt:"Fitness"},average:{max:24,label:"Average",labelIt:"Nella Media"},above_average:{max:30,label:"Above Average",labelIt:"Sopra la Media"},obese:{max:100,label:"Obese",labelIt:"Obesità"}},m={essential:{max:13,label:"Essential Fat",labelIt:"Grasso Essenziale"},athlete:{max:20,label:"Athlete",labelIt:"Atleta"},fitness:{max:24,label:"Fitness",labelIt:"Fitness"},average:{max:31,label:"Average",labelIt:"Nella Media"},above_average:{max:39,label:"Above Average",labelIt:"Sopra la Media"},obese:{max:100,label:"Obese",labelIt:"Obesità"}};function p(e){const{height:t,waistCircumference:a,neckCircumference:r,hipCircumference:n,gender:i}=e;if(!a||!r||i==="female"&&!n)return null;const s=t;if(i==="male"){const o=495/(1.0324-.19077*Math.log10(a-r)+.15456*Math.log10(s))-450;return Math.max(0,Math.min(60,o))}else{const o=495/(1.29579-.35004*Math.log10(a+n-r)+.221*Math.log10(s))-450;return Math.max(0,Math.min(60,o))}}function h(e){const{height:t,weight:a,age:r,gender:n}=e,i=a/(t/100)**2;return n==="male"?1.2*i+.23*r-16.2:1.2*i+.23*r-5.4}function b(e){let t=p(e),a="navy";t===null&&(t=h(e),a="bmi_estimate");const r=e.weight*(t/100),n=e.weight-r,i=e.gender==="male"?u:m;let s="average",o=i.average.labelIt;for(const[l,c]of Object.entries(i))if(t<=c.max){s=l,c.label,o=c.labelIt;break}return{bodyFatPercentage:Math.round(t*10)/10,leanMass:Math.round(n*10)/10,fatMass:Math.round(r*10)/10,category:s,categoryIt:o,method:a}}function g(e,t){const a=t==="male"?u:m;if(e<=a.essential.max)return 50;if(e<=a.athlete.max){const r=a.athlete.max-a.essential.max;return 90+10*(1-(e-a.essential.max)/r)}else if(e<=a.fitness.max){const r=a.fitness.max-a.athlete.max;return 80+10*(1-(e-a.athlete.max)/r)}else if(e<=a.average.max){const r=a.average.max-a.fitness.max;return 65+15*(1-(e-a.fitness.max)/r)}else if(e<=a.above_average.max){const r=a.above_average.max-a.average.max;return 45+20*(1-(e-a.average.max)/r)}else return Math.max(30,45-(e-a.above_average.max))}function v(e){return e<25?90:e<30?85:e<35?82:e<40?78:e<45?74:e<50?70:e<55?65:e<60?60:e<65?55:50}function x(e){const t=b(e),a=g(t.bodyFatPercentage,e.gender),r=v(e.age),n=Math.round(a*.7+r*.3),i=[],s=[];(t.category==="obese"||t.category==="above_average")&&(i.push("Consider including more cardio and monitoring caloric intake"),s.push("Considera aggiungere più cardio e monitorare l'apporto calorico")),t.category==="essential"&&(i.push("Body fat may be too low - ensure adequate nutrition for recovery"),s.push("Il grasso corporeo potrebbe essere troppo basso - assicura nutrizione adeguata per il recupero")),e.age>50&&(i.push("Recovery may take longer - ensure adequate rest between sessions"),s.push("Il recupero potrebbe richiedere più tempo - assicura riposo adeguato tra le sessioni")),t.method==="bmi_estimate"&&(i.push("For more accurate body composition, add waist and neck measurements"),s.push("Per una composizione corporea più accurata, aggiungi misure di vita e collo"));let o="Average",l="Nella Media";return n>=85?(o="Excellent",l="Eccellente"):n>=75?(o="Good",l="Buono"):n>=60?(o="Average",l="Nella Media"):(o="Needs Improvement",l="Da Migliorare"),{score:n,breakdown:{bodyComposition:Math.round(a),age:Math.round(r),combined:n},category:o,categoryIt:l,recommendations:i,recommendationsIt:s}}function I(e){if(!(e!=null&&e.personalInfo))return 65;const{height:t,weight:a,age:r,gender:n,waistCircumference:i,neckCircumference:s,hipCircumference:o}=e.personalInfo;if(!t||!a||!r)return 65;const l={height:parseFloat(t)||170,weight:parseFloat(a)||70,age:parseInt(r)||30,gender:n==="female"?"female":"male",waistCircumference:i?parseFloat(i):void 0,neckCircumference:s?parseFloat(s):void 0,hipCircumference:o?parseFloat(o):void 0};return x(l).score}export{M as a,I as c,y as d};
