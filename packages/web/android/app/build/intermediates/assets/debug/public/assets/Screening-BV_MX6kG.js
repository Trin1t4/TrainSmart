import{j as e,O as Q,K as B,af as Y,g as K,ag as A,J as X,P as me,s as pe,X as xe}from"./vendor-ui-B5xs3EUI.js";import{a as d,u as ue,e as he}from"./vendor-react-DLKD8xKB.js";import{C as Z,a as D,b as ee,c as se}from"./card-BbERCm1Z.js";import{u as ge,C as ve,d as fe}from"./index-CsHuaFST.js";import{c as be,a as Ne,d as je}from"./bodyCompositionScoring-Cp0LER6O.js";import{W as we}from"./WarmupGuide-CrjsEtVJ.js";import"./utils-BykweIWy.js";import"./clsx-B-dksMZM.js";import"./vendor-supabase-DF1H9KNm.js";const ye={"Pike Push-up":"/videos/exercises/pike-push-up.mp4","Pike Push-up Elevato":"/videos/exercises/pike-push-up.mp4","HSPU al Muro (ROM parziale)":"/videos/exercises/wall-handstand-push-up.mp4","HSPU al Muro (ROM completo)":"/videos/exercises/wall-handstand-push-up.mp4","HSPU in Verticale Libera":"/videos/exercises/wall-handstand-push-up.mp4","Push-up al Muro":"/videos/exercises/wall-push-up.mp4","Push-up Inclinato (rialzato)":"/videos/exercises/incline-push-up.mp4","Push-up Standard":"/videos/exercises/standard-push-up.mp4","Push-up su Ginocchia":"/videos/exercises/knee-push-up.mp4","Push-up Diamante":"/videos/exercises/diamond-push-up.mp4","Push-up Arciere":"/videos/exercises/archer-push-up.mp4","Pseudo Planche Push-up":"/videos/exercises/pseudo-planche-push-up.mp4","Push-up a Un Braccio":"/videos/exercises/one-arm-push-up.mp4","Camminata al Muro":"/videos/exercises/wall-walk.mp4","Squat Assistito (con supporto)":"/videos/exercises/modified-squat.mp4","Squat a Corpo Libero":"/videos/exercises/deep-squat-hold.mp4","Squat con Salto":"/videos/exercises/squat-jump.mp4","Split Squat Bulgaro":"/videos/exercises/bulgarian-split-squat.mp4","Pistol Squat Assistito":"/videos/exercises/assisted-pistol-squat.mp4","Shrimp Squat (Squat Gambero)":"/videos/exercises/shrimp-squat.mp4","Pistol Squat":"/videos/exercises/pistol-squat.mp4","Rematore Inverso (barra alta)":"/videos/exercises/inverted-row.mp4","Rematore Inverso (barra media)":"/videos/exercises/inverted-row.mp4","Rematore Inverso (barra bassa)":"/videos/exercises/inverted-row.mp4","Trazione Negativa (solo eccentrica)":"/videos/exercises/standard-pull-up.mp4","Trazione con Elastico":"/videos/exercises/assisted-pull-up.mp4","Trazione alla Sbarra":"/videos/exercises/standard-pull-up.mp4","Chin-up (presa supina)":"/videos/exercises/chin-up.mp4","Trazione Arciere":"/videos/exercises/standard-pull-up.mp4","Progressione Trazione a Un Braccio":"/videos/exercises/standard-pull-up.mp4","Ponte Glutei":"/videos/exercises/glute-bridge.mp4","Ponte Glutei a Una Gamba":"/videos/exercises/single-leg-glute-bridge.mp4","Hip Thrust":"/videos/exercises/hip-thrust.mp4","Stacco Rumeno a Una Gamba (corpo libero)":"/videos/exercises/single-leg-rdl.mp4","Nordic Curl (solo eccentrica)":"/videos/exercises/nordic-hamstring-curl.mp4","Nordic Curl (completo)":"/videos/exercises/nordic-hamstring-curl.mp4","Leg Curl Scivolato":"/videos/exercises/slider-leg-curl.mp4","Slider Leg Curl":"/videos/exercises/slider-leg-curl.mp4",Plank:"/videos/exercises/plank.mp4","Plank Laterale":"/videos/exercises/side-plank.mp4","Copenhagen Plank":"/videos/exercises/copenhagen-plank.mp4","Hollow Body Hold":"/videos/exercises/hollow-body-hold.mp4","L-sit Raccolto":"/videos/exercises/l-sit.mp4","L-sit a Una Gamba":"/videos/exercises/l-sit.mp4","L-sit Completo":"/videos/exercises/l-sit.mp4","L-sit":"/videos/exercises/l-sit.mp4","Dragon Flag":"/videos/exercises/dragon-flag.mp4","Lying Leg Raise":"/videos/exercises/lying-leg-raise.mp4","Alzate Gambe Sdraiato":"/videos/exercises/lying-leg-raise.mp4","Box Jump":"/videos/exercises/box-jump.mp4","Broad Jump":"/videos/exercises/broad-jump.mp4","Drop Jump":"/videos/exercises/drop-jump.mp4","Counter Movement Jump":"/videos/exercises/counter-movement-jump.mp4","Med Ball Chest Pass":"/videos/exercises/med-ball-chest-pass.mp4","Med Ball Overhead Throw":"/videos/exercises/med-ball-overhead-throw.mp4","Band Rows":"/videos/exercises/band-rows.mp4","Rematore con Elastico":"/videos/exercises/band-rows.mp4","Squat con Bilanciere":"/videos/exercises/back-squat.mp4","Panca Piana":"/videos/exercises/flat-barbell-bench-press.mp4","Lento Avanti":"/videos/exercises/military-press.mp4","Lat Machine":"/videos/exercises/lat-pulldown.mp4","Pulley Basso":"/videos/exercises/seated-cable-row.mp4","Stacco da Terra":"/videos/exercises/conventional-deadlift.mp4","Crunch ai Cavi":"/videos/exercises/cable-crunch.mp4","Leg Press":"/videos/exercises/leg-press.mp4","Chest Press":"/videos/exercises/chest-press.mp4","Shoulder Press Machine":"/videos/exercises/shoulder-press-machine.mp4","Leg Curl":"/videos/exercises/leg-curl.mp4"};function te(l,r){if(l<=0)return 0;const z=l/(1.0278-.0278*r),k=l*(1+r/30);return Math.round((z+k)/2*10)/10}const $=[{id:"lower_push",name:"Spinta Gambe",description:"Scegli come testare la spinta delle gambe",variants:[{id:"back_squat",name:"Squat con Bilanciere",type:"free_weight",description:"Attiva pi√π muscoli (core, stabilizzatori). Migliore per forza funzionale.",videoUrl:"/videos/exercises/back-squat.mp4",recommended:!0},{id:"leg_press",name:"Leg Press",type:"machine",description:"Pi√π sicura, ideale per iniziare. Meno attivazione muscolare globale.",videoUrl:"/videos/exercises/leg-press.mp4"}]},{id:"horizontal_push",name:"Spinta Orizzontale (Petto)",description:"Scegli come testare la spinta orizzontale",variants:[{id:"bench_press",name:"Panca Piana",type:"free_weight",description:"Attiva stabilizzatori e core. Movimento pi√π completo.",videoUrl:"/videos/exercises/flat-barbell-bench-press.mp4",recommended:!0},{id:"chest_press",name:"Chest Press",type:"machine",description:"Traiettoria guidata, pi√π sicura per principianti.",videoUrl:"/videos/exercises/chest-press.mp4"}]},{id:"vertical_pull",name:"Tirata Verticale (Dorsali)",description:"Test alla Lat Machine",variants:[{id:"lat_pulldown",name:"Lat Machine",type:"machine",description:"Tirata verticale ai cavi per dorsali e bicipiti.",videoUrl:"/videos/exercises/lat-pulldown.mp4"}]},{id:"vertical_push",name:"Spinta Verticale (Spalle)",description:"Scegli come testare la spinta verticale",variants:[{id:"military_press",name:"Lento Avanti",type:"free_weight",description:"In piedi, attiva core e stabilizzatori. Pi√π completo.",videoUrl:"/videos/exercises/military-press.mp4",recommended:!0},{id:"shoulder_press_machine",name:"Shoulder Press (Macchina)",type:"machine",description:"Seduto, traiettoria guidata. Ideale per isolare le spalle.",videoUrl:"/videos/exercises/shoulder-press.mp4"}]},{id:"horizontal_pull",name:"Tirata Orizzontale (Remata)",description:"Scegli come testare la tirata orizzontale",variants:[{id:"low_cable_row",name:"Pulley Basso",type:"cable",description:"Cavi liberi, richiede controllo del core.",videoUrl:"/videos/exercises/seated-cable-row.mp4",recommended:!0},{id:"row_machine",name:"Row Machine",type:"machine",description:"Traiettoria guidata, pi√π semplice da eseguire.",videoUrl:"/videos/exercises/seated-row-machine.mp4"}]}];$.map(l=>({id:l.id,name:l.variants[0].name,description:l.variants[0].description,exercise:{id:l.variants[0].id,name:l.variants[0].name,unit:"kg"}}));$.map(l=>({id:l.id,name:l.variants[l.variants.length-1].name,description:l.variants[l.variants.length-1].description,exercise:{id:l.variants[l.variants.length-1].id,name:l.variants[l.variants.length-1].name,unit:"kg"}}));function Se({onComplete:l,userData:r,userId:z}){var V;const{t:k}=ge(),v=(r==null?void 0:r.trainingLocation)==="gym"&&((r==null?void 0:r.trainingType)==="equipment"||(r==null?void 0:r.trainingType)==="machines");let x,E;const C=["lower_push","horizontal_push"];v?(x=$.filter(s=>C.includes(s.id)),E="GYM_WITH_CHOICE"):(x=ve.filter(s=>C.includes(s.id)),E="CALISTHENICS");const[u,R]=d.useState(0),[M,T]=d.useState({}),[f,I]=d.useState(""),[b,P]=d.useState(""),[o,N]=d.useState(""),[c,_]=d.useState(""),[ae,ie]=d.useState(!1),[j,H]=d.useState(null),m=x[u],le=(u+1)/x.length*100;console.log("[SCREENING] Mode:",E,"| Location:",r==null?void 0:r.trainingLocation,"| TrainingType:",r==null?void 0:r.trainingType);const re=()=>{var s,t;if(u>0){const i=x[u-1],a=M[i.id];R(u-1),a?v?(P(a.variantId||""),_(((s=a.weight10RM)==null?void 0:s.toString())||"")):(I(a.variantId||""),N(((t=a.reps)==null?void 0:t.toString())||"")):(I(""),P(""),N(""),_(""))}},q=(s,t)=>{const i=s.endsWith(".mp4")||s.endsWith(".webm");H({url:s,name:t,isVideo:i})},F=()=>{H(null)};d.useEffect(()=>{const s=t=>{t.key==="Escape"&&j&&F()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[j]);const oe=()=>{var t,i;if(v){if(!b){alert("Seleziona quale esercizio vuoi usare per il test");return}if(!c||parseFloat(c)===0){alert("Inserisci il peso massimo (10RM) per questo esercizio");return}}else if(!f||!o||parseInt(o)===0){const a=(t=m.progressions)==null?void 0:t.find(n=>n.id===f),p=a!=null&&a.isometric?"secondi":"ripetizioni";alert(`Seleziona una variante e inserisci il numero di ${p}`);return}let s;if(v){const a=m.variants.find(G=>G.id===b),p=parseFloat(c),n=te(p,10),h=((i=r==null?void 0:r.personalInfo)==null?void 0:i.weight)||70,w=n/h,L=Math.round(w*100),y=(a==null?void 0:a.type)==="machine";s={...M,[m.id]:{patternName:m.name,variantId:b,variantName:(a==null?void 0:a.name)||b,variantType:(a==null?void 0:a.type)||"unknown",usedMachine:y,weight10RM:p,oneRM:Math.round(n*10)/10,relativeStrength:Math.round(w*100)/100,difficulty:y?6:8,reps:10,score:L,mode:"GYM"}},console.log(`[GYM] ${m.name}: ${a==null?void 0:a.name} 10RM=${p}kg ‚Üí 1RM=${Math.round(n)}kg | Score=${L} | Machine=${y}`)}else{const a=m.progressions.find(p=>p.id===f);s={...M,[m.id]:{patternName:m.name,variantId:f,variantName:a.name,difficulty:a.difficulty,reps:parseInt(o),isometric:a.isometric||!1,score:a.difficulty*parseInt(o),mode:"CALISTHENICS"}}}T(s),u<x.length-1?(R(u+1),I(""),P(""),N(""),_("")):ne(s)},ne=s=>{var J;const t=localStorage.getItem("quiz_data");let i=50;if(t){const g=JSON.parse(t);if(g.correctAnswers!==void 0&&g.totalQuestions)i=Math.round(g.correctAnswers/g.totalQuestions*100);else if(g.score!==void 0){const O=(g.totalQuestions||3)*2;i=g.score>20?g.score:Math.round(g.score/O*100)}}const p=Object.values(s).reduce((g,O)=>g+O.score,0),n=x.length*10*20,h=(p/n*100).toFixed(1),w=localStorage.getItem("onboarding_data"),L=w?JSON.parse(w):null,y=be(L).toFixed(1),G=(i*.2+parseFloat(h)*.6+parseFloat(y)*.2).toFixed(1),U=Object.values(s).every(g=>g.usedMachine===!0),{level:W,finalScore:Ce}=Ne(parseFloat(h),i,parseFloat(y),U);U&&console.log("[SCREENING] ‚ö†Ô∏è User chose only machines ‚Üí may suggest free weights later");const S=je(i,parseFloat(h));S.hasDiscrepancy&&(console.log(`[SCREENING] ‚ö†Ô∏è Discrepancy detected: ${S.type}`),console.log(`   ${S.feedback}`));const ce={level:W,finalScore:G,quizScore:i,practicalScore:h,physicalScore:y,patternBaselines:s,usedOnlyMachines:U,discrepancy:S.hasDiscrepancy?S.type:null,discrepancyGap:S.gap,discrepancyFeedback:S.feedback,completed:!0,timestamp:new Date().toISOString()};localStorage.setItem("screening_data",JSON.stringify(ce)),localStorage.removeItem("screening_pending");const de=((J=Object.values(s)[0])==null?void 0:J.mode)||"CALISTHENICS";console.log(`=== SCREENING ${de} COMPLETED ===`),console.log("Quiz Score:",i+"%"),console.log("Practical Score:",h+"%"),console.log("Physical Score:",y+"%"),console.log("FINAL SCORE:",G+"%"),console.log("LEVEL:",W.toUpperCase()),console.log("PATTERN BASELINES:",s),console.log("========================================"),ie(!0)};if(ae){const s=JSON.parse(localStorage.getItem("screening_data"));return e.jsx("div",{className:"min-h-screen overflow-y-auto bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-8 px-4",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(Z,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(D,{children:e.jsx(ee,{className:"text-3xl text-white text-center",children:"Assessment Completato!"})}),e.jsxs(se,{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"inline-block bg-emerald-500/20 border-2 border-emerald-500 rounded-full px-8 py-4",children:[e.jsx("p",{className:"text-sm text-emerald-300 mb-1",children:"Il tuo livello"}),e.jsx("p",{className:"text-4xl font-bold text-emerald-400 uppercase",children:s.level})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Quiz Teorico"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[s.quizScore,"%"]})]}),e.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Test Pratici"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:[s.practicalScore,"%"]})]}),e.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Parametri Fisici"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-400",children:[s.physicalScore,"%"]})]})]}),e.jsxs("div",{className:"bg-slate-700/50 rounded-lg p-6 mt-6",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Score Finale"}),e.jsxs("p",{className:"text-5xl font-bold text-white",children:[s.finalScore,"%"]})]}),e.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-6 mt-6 text-left",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-emerald-400"}),"Le tue baseline per ogni pattern"]}),e.jsx("div",{className:"space-y-3",children:Object.values(s.patternBaselines).map((t,i)=>e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-600",children:[e.jsx("p",{className:"text-sm text-slate-300 font-medium",children:t.patternName}),t.mode==="GYM"?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-emerald-400 text-sm mt-1 font-mono",children:[t.variantName,": 10RM = ",e.jsxs("strong",{children:[t.weight10RM," kg"]})]}),e.jsxs("p",{className:"text-blue-400 text-xs mt-1 font-mono",children:["1RM stimato: ",t.oneRM," kg ‚Ä¢ Rel. Strength: ",t.relativeStrength]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-emerald-400 text-sm mt-1 flex items-center gap-2",children:t.isometric?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4"}),t.variantName," √ó ",t.reps," secondi"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4"}),t.variantName," √ó ",t.reps," reps"]})}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Difficolt√†: ",t.difficulty,"/10"]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Score: ",t.score]})]},i))})]})]}),e.jsxs("button",{onClick:()=>l(s),className:"w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-4 rounded-lg font-bold text-lg hover:from-emerald-600 hover:to-emerald-700 transition shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2",children:[k("common.continue"),e.jsx(K,{className:"w-5 h-5"})]})]})]})})})}return e.jsx("div",{className:"min-h-screen overflow-y-auto bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-8 px-4",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h1",{className:"text-xl font-bold text-white",children:["Assessment Pratico - Pattern ",u+1,"/",x.length]}),e.jsxs("span",{className:"text-slate-300",children:[u+1," / ",x.length]})]}),e.jsx("div",{className:"h-2 bg-slate-700 rounded-full",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-600 transition-all duration-300",style:{width:`${le}%`}})})]}),e.jsxs(Z,{className:"bg-slate-800/50 backdrop-blur-lg border-slate-700",children:[e.jsxs(D,{children:[e.jsx(ee,{className:"text-2xl text-white",children:m.name}),e.jsx("p",{className:"text-slate-400 text-sm mt-2",children:m.description})]}),e.jsxs(se,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500 rounded-lg p-4",children:[e.jsxs("p",{className:"text-emerald-300 font-medium mb-2",children:["üìã ",v?"Test 10RM":"Cosa fare",":"]}),v?e.jsxs("ol",{className:"text-emerald-200 text-sm space-y-1 list-decimal list-inside",children:[e.jsxs("li",{children:["Trova il peso massimo con cui riesci a fare ",e.jsx("strong",{children:"esattamente 10 ripetizioni"})," con forma perfetta"]}),e.jsx("li",{children:"Inserisci il peso in kg (10RM = 10 Rep Max)"}),e.jsx("li",{children:"Calcoleremo automaticamente il tuo 1RM usando la formula di Brzycki"})]}):e.jsxs("ol",{className:"text-emerald-200 text-sm space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Seleziona la variante pi√π difficile che riesci a fare con buona forma"}),e.jsx("li",{children:"Inserisci il numero massimo di ripetizioni pulite che riesci a completare"})]})]}),v?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-white font-semibold text-lg",children:"Quale esercizio preferisci per questo test?"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.variants.map(s=>{const t=b===s.id;return e.jsxs("button",{onClick:()=>P(s.id),className:`relative p-4 rounded-xl border-2 transition-all text-left ${t?"border-emerald-500 bg-emerald-500/20 shadow-lg shadow-emerald-500/10":"border-slate-600 bg-slate-700/50 hover:border-slate-500"}`,children:[s.recommended&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-emerald-500 text-white text-xs px-2 py-0.5 rounded-full font-medium",children:"Consigliato"}),e.jsxs("div",{className:"relative w-full h-32 rounded-lg overflow-hidden bg-slate-800 mb-3 group",children:[s.videoUrl?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:s.videoUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0,onError:i=>{const a=i.target;a.style.display="none"}}),e.jsx("button",{onClick:i=>{i.stopPropagation(),q(s.videoUrl,s.name)},className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(A,{className:"w-8 h-8 text-white"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl",children:"üèãÔ∏è"}),e.jsx("span",{className:`absolute bottom-2 left-2 text-xs px-2 py-1 rounded-full font-medium ${s.type==="free_weight"?"bg-blue-500/80 text-white":s.type==="cable"?"bg-purple-500/80 text-white":"bg-orange-500/80 text-white"}`,children:s.type==="free_weight"?"Peso Libero":s.type==="cable"?"Cavi":"Macchina"})]}),e.jsx("p",{className:`font-bold text-lg ${t?"text-emerald-300":"text-white"}`,children:s.name}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:s.description}),t&&e.jsx("div",{className:"absolute top-3 right-3 w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-white"})})]},s.id)})})]}),b&&e.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2 duration-200 pt-4 border-t border-slate-700",children:[e.jsxs("label",{className:"text-white font-semibold text-lg",children:["Peso 10RM (kg) - ",(V=m.variants.find(s=>s.id===b))==null?void 0:V.name]}),e.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"Il peso massimo con cui riesci a fare esattamente 10 ripetizioni con forma perfetta"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"0",step:"0.5",value:c,onChange:s=>_(s.target.value),placeholder:"es. 60",className:"w-full p-4 pr-12 rounded-xl bg-slate-700 border-2 border-slate-600 text-white font-mono text-lg focus:border-emerald-500 focus:outline-none"}),e.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 font-mono",children:"kg"})]}),c&&parseFloat(c)>0&&e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 mt-2",children:[e.jsxs("p",{className:"text-blue-300 text-sm",children:["üéØ 1RM stimato: ",e.jsxs("strong",{className:"font-mono text-lg",children:[Math.round(te(parseFloat(c),10))," kg"]})]}),e.jsx("p",{className:"text-blue-400 text-xs mt-1",children:"Calcolato con formula di Brzycki"})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-white font-medium",children:"Seleziona la variante pi√π difficile che riesci a fare:"}),e.jsx("div",{className:"space-y-2 max-h-[320px] overflow-y-auto pr-2",children:m.progressions.map(s=>{const t=ye[s.name],i=fe(s.name),a=f===s.id,p=!!t;return e.jsx("div",{className:"relative",children:e.jsxs("button",{onClick:()=>I(s.id),className:`w-full flex items-center gap-4 p-3 rounded-xl border-2 transition-all ${a?"border-emerald-500 bg-emerald-500/20 shadow-lg shadow-emerald-500/10":"border-slate-600 bg-slate-700/50 hover:border-slate-500 hover:bg-slate-700"}`,children:[e.jsx("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-slate-800 flex-shrink-0 group",children:p?e.jsxs(e.Fragment,{children:[e.jsx("video",{src:t,className:"w-full h-full object-cover",muted:!0,loop:!0,playsInline:!0,autoPlay:!0,onError:n=>{const h=n.target;h.style.display="none";const w=h.nextElementSibling;w&&(w.style.display="flex")}}),e.jsx("div",{className:"w-full h-full items-center justify-center text-2xl hidden",children:i?e.jsx("img",{src:i,alt:s.name,className:"w-full h-full object-cover"}):"üèãÔ∏è"}),e.jsx("div",{className:"absolute bottom-0.5 right-0.5 bg-emerald-500/90 rounded px-1 py-0.5",children:e.jsx(me,{className:"w-2.5 h-2.5 text-white fill-white"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),q(t,s.name)},className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-white"})})]}):i?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i,alt:s.name,className:"w-full h-full object-cover",onError:n=>{n.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><rect fill="%23374151" width="64" height="64"/><text x="32" y="36" text-anchor="middle" fill="%239ca3af" font-size="24">üèãÔ∏è</text></svg>'}}),e.jsx("button",{onClick:n=>{n.stopPropagation(),q(i,s.name)},className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-white"})})]}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:"üèãÔ∏è"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`font-semibold ${a?"text-emerald-300":"text-white"}`,children:s.name}),s.isometric&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-500/20 border border-blue-500/30 rounded-full text-xs text-blue-300",children:[e.jsx(B,{className:"w-3 h-3"}),"Isometrico"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex gap-0.5",children:[...Array(10)].map((n,h)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${h<s.difficulty?"bg-emerald-500":"bg-slate-600"}`},h))}),e.jsxs("span",{className:"text-xs text-slate-400",children:[s.difficulty,"/10"]})]})]}),e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 ${a?"bg-emerald-500 text-white":"border-2 border-slate-500"}`,children:a&&e.jsx(X,{className:"w-4 h-4"})})]})},s.id)})})]}),f&&(()=>{const s=m.progressions.find(n=>n.id===f),t=(s==null?void 0:s.isometric)||!1,i=t?"secondi":"ripetizioni",p=t?B:Y;return e.jsxs("div",{className:"space-y-2 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("label",{className:"text-white font-medium flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-emerald-400"}),t?`Per quanti secondi riesci a tenere "${s==null?void 0:s.name}"?`:`Quante ripetizioni pulite riesci a fare di "${s==null?void 0:s.name}"?`]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",min:"1",max:t?"300":"100",value:o,onChange:n=>N(n.target.value),placeholder:t?"es. 60":"es. 10",className:"w-full p-4 pr-24 rounded-xl bg-slate-700 border-2 border-slate-600 text-white text-lg focus:border-emerald-500 focus:outline-none"}),e.jsxs("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 font-medium flex items-center gap-1",children:[e.jsx(p,{className:"w-4 h-4"}),i]})]}),t&&o&&parseInt(o)>0&&e.jsxs("p",{className:"text-xs text-blue-300 flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),"Mantieni la posizione corretta per ",o," ",i]})]})})()]}),e.jsxs("div",{className:"flex gap-3",children:[u>0&&e.jsxs("button",{onClick:re,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white py-3 rounded-lg font-semibold transition flex items-center justify-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),"Indietro"]}),e.jsxs("button",{onClick:oe,disabled:v?!b||!c:!f||!o,className:`${u>0?"flex-1":"w-full"} bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:from-emerald-600 hover:to-emerald-700 transition shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2`,children:[u<x.length-1?"Prossimo Pattern":"Completa Assessment",e.jsx(K,{className:"w-4 h-4"})]})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:F,children:e.jsxs("div",{className:"relative max-w-4xl w-full bg-slate-800 rounded-2xl shadow-2xl animate-in zoom-in-95 duration-300",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-emerald-400"}),j.name]}),e.jsx("button",{onClick:F,className:"p-2 rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-300 hover:text-white transition",children:e.jsx(xe,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"relative rounded-xl overflow-hidden bg-slate-900",children:j.isVideo?e.jsx("video",{src:j.url,className:"w-full h-auto max-h-[70vh] object-contain",controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0}):e.jsx("img",{src:j.url,alt:j.name,className:"w-full h-auto max-h-[70vh] object-contain",onError:s=>{s.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><rect fill="%23374151" width="400" height="400"/><text x="200" y="220" text-anchor="middle" fill="%239ca3af" font-size="48">üèãÔ∏è</text></svg>'}})})}),e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-sm text-slate-400 text-center",children:"Clicca fuori dall'immagine o premi ESC per chiudere"})})]})})]})})}function Le(){const[l,r]=d.useState(null),[z,k]=d.useState(null),[v,x]=d.useState(!0),[E,C]=d.useState(!0),[u,R]=d.useState(!1),M=ue(),T=he();d.useEffect(()=>{var c;f();const o=((c=T.state)==null?void 0:c.manualEntry)===!0;R(o);const N=sessionStorage.getItem("warmup_completed");(o||N==="true"||N==="skipped")&&(C(!1),o&&console.log("[SCREENING] Manual entry mode - skipping warmup"))},[T.state]);const f=async()=>{try{let o=localStorage.getItem("userId");o||(o="test-"+Date.now(),localStorage.setItem("userId",o)),r(o);const N=localStorage.getItem("onboarding_data");if(N){const c=JSON.parse(N);k(c),console.log("[SCREENING] ‚úÖ Loaded onboarding data:",c),console.log("[SCREENING] üè† Training location:",c.trainingLocation),console.log("[SCREENING] üéØ Training type:",c.trainingType)}else console.warn("[SCREENING] ‚ö†Ô∏è No onboarding_data found in localStorage");x(!1)}catch(o){console.error("[SCREENING] Error:",o),x(!1)}},I=async o=>{console.log("[SCREENING] ‚úÖ Assessment completed, navigating to dashboard"),console.log("[SCREENING] Data:",o),setTimeout(()=>{M("/dashboard")},150)},b=()=>{sessionStorage.setItem("warmup_completed","true"),C(!1)},P=()=>{sessionStorage.setItem("warmup_completed","skipped"),C(!1)};return v?e.jsx("div",{children:"Caricamento..."}):E?e.jsx(we,{onComplete:b,onSkip:P}):e.jsx(Se,{onComplete:I,userData:z,userId:l})}export{Le as default};
