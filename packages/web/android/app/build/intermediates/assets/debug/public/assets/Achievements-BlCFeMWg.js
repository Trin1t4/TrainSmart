import{j as t,r as i}from"./vendor-ui-B5xs3EUI.js";import{a as l}from"./vendor-react-DLKD8xKB.js";import{an as v}from"./index-CsHuaFST.js";import"./vendor-supabase-DF1H9KNm.js";function N(){const[a,o]=l.useState([]),[d,n]=l.useState(!0),[s,x]=l.useState("all");l.useEffect(()=>{h()},[]);const h=async()=>{n(!0);try{const e=await v();e.success&&e.data&&o(e.data)}catch(e){console.error("Load achievements error:",e)}finally{n(!1)}},c=a.filter(e=>s==="unlocked"?e.is_unlocked:s==="locked"?!e.is_unlocked:!0),u=a.filter(e=>e.is_unlocked).length,m=a.filter(e=>e.is_unlocked).reduce((e,r)=>e+(r.achievement.points||0),0),g=e=>{switch(e){case"legendary":return"from-yellow-400 to-orange-500";case"epic":return"from-purple-400 to-purple-600";case"rare":return"from-blue-400 to-blue-600";default:return"from-gray-400 to-gray-600"}},p=e=>{switch(e){case"consistency":return"üìÖ";case"strength":return"üí™";case"volume":return"üìä";case"milestone":return"üèÜ";case"social":return"üë•";default:return"üéñÔ∏è"}};return d?t.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:t.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):t.jsxs("div",{className:"min-h-screen bg-gray-900 pb-20",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-600 to-blue-600 px-4 py-8",children:t.jsxs("div",{className:"max-w-2xl mx-auto",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-6",children:"Achievement"}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-white",children:u}),t.jsx("div",{className:"text-white/80 text-sm",children:"Sbloccati"})]}),t.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-white",children:a.length}),t.jsx("div",{className:"text-white/80 text-sm",children:"Totali"})]}),t.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center",children:[t.jsx("div",{className:"text-3xl font-bold text-white",children:m}),t.jsx("div",{className:"text-white/80 text-sm",children:"Punti"})]})]})]})}),t.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:t.jsx("div",{className:"flex gap-2",children:["all","unlocked","locked"].map(e=>t.jsxs("button",{onClick:()=>x(e),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${s===e?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,children:[e==="all"&&"Tutti",e==="unlocked"&&"Sbloccati",e==="locked"&&"Da sbloccare"]},e))})}),t.jsxs("div",{className:"max-w-2xl mx-auto px-4 pb-4",children:[t.jsx("div",{className:"grid gap-4",children:c.map((e,r)=>t.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},className:`relative overflow-hidden rounded-xl border ${e.is_unlocked?"bg-gray-800 border-gray-700":"bg-gray-800/50 border-gray-700/50"}`,children:[t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${g(e.achievement.rarity)} flex items-center justify-center text-3xl ${!e.is_unlocked&&"opacity-40 grayscale"}`,children:e.achievement.icon||p(e.achievement.category)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:`font-bold ${e.is_unlocked?"text-white":"text-gray-400"}`,children:e.achievement.name}),e.is_unlocked&&t.jsx("span",{className:"text-green-500",children:"‚úì"})]}),t.jsx("p",{className:`text-sm ${e.is_unlocked?"text-gray-300":"text-gray-500"}`,children:e.achievement.description}),!e.is_unlocked&&t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[t.jsxs("span",{children:[e.current_value," / ",e.target_value]}),t.jsxs("span",{children:[Math.round(e.progress_percent),"%"]})]}),t.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:t.jsx(i.div,{initial:{width:0},animate:{width:`${e.progress_percent}%`},transition:{duration:.5,delay:r*.05},className:"h-full bg-gradient-to-r from-blue-500 to-purple-500"})})]}),e.is_unlocked&&e.unlocked_at&&t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Sbloccato il ",new Date(e.unlocked_at).toLocaleDateString("it-IT")]})]}),t.jsxs("div",{className:`text-right ${e.is_unlocked?"text-yellow-400":"text-gray-500"}`,children:[t.jsxs("div",{className:"text-lg font-bold",children:["+",e.achievement.points]}),t.jsx("div",{className:"text-xs",children:"punti"})]})]}),e.achievement.rarity&&e.achievement.rarity!=="common"&&t.jsx("div",{className:`absolute top-2 right-2 px-2 py-0.5 rounded text-xs font-bold uppercase ${e.achievement.rarity==="legendary"?"bg-yellow-500/20 text-yellow-400":e.achievement.rarity==="epic"?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:e.achievement.rarity})]},e.achievement.id))}),c.length===0&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx("span",{className:"text-4xl block mb-4",children:s==="unlocked"?"üîí":"üéñÔ∏è"}),t.jsx("p",{className:"text-gray-400",children:s==="unlocked"?"Non hai ancora sbloccato nessun achievement":"Tutti gli achievement sono stati sbloccati!"})]})]})]})}export{N as Achievements,N as default};
