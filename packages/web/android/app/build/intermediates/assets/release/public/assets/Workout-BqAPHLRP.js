import{j as e,k as _e,O as Re,R as K,D as I,a5 as Ce,X as De,ak as Ie,aI as J,ae as V,e as Pe,aJ as We}from"./vendor-ui-B5xs3EUI.js";import{u as ze,a as c}from"./vendor-react-DLKD8xKB.js";import{u as Ee,ab as Te,ac as Oe,s as S,R as X,ad as Me,ae as Ue,U as B,X as Le,J as P}from"./index-CsHuaFST.js";import{RecoveryScreening as Ae}from"./RecoveryScreening-DyKZYQ4j.js";import{R as $e}from"./RunningSessionView-CfP4biXO.js";import"./vendor-supabase-DF1H9KNm.js";import"./clsx-B-dksMZM.js";import"./utils-BykweIWy.js";function Qe(){var F,q;const f=ze(),{t:h}=Ee(),[Y,j]=c.useState(!0),[r,_]=c.useState(null),[m,Q]=c.useState(0),[Z,R]=c.useState(!1),[Ge,ee]=c.useState(null),[N,W]=c.useState(null),[b,z]=c.useState({}),[u,C]=c.useState(null),[E,se]=c.useState([]),[te,w]=c.useState(!1),[ae,T]=c.useState("same_day"),[p,O]=c.useState([]),[y,ne]=c.useState(null),[le,v]=c.useState(!1),[re,k]=c.useState(!1);c.useEffect(()=>{ce()},[]),c.useEffect(()=>{y&&r&&ie()},[y,r]);async function ie(){var s,t,n,l;if(y)try{const a=await Te(y);if(a){const o=new Date(a.workout_date),i=new Date,d=o.toDateString()===i.toDateString(),x=await Oe(a.id);se(x);const ve=new Set(x.map(g=>g.exercise_name)),Fe=((s=r==null?void 0:r.weekly_schedule)==null?void 0:s.flatMap(g=>{var H;return((H=g.exercises)==null?void 0:H.map(Se=>Se.name))||[]}))||[],D=(t=r==null?void 0:r.weekly_schedule)==null?void 0:t.find(g=>g.dayName===a.day_name),ke=((l=(n=D==null?void 0:D.exercises)==null?void 0:n.filter(g=>!ve.has(g.name)))==null?void 0:l.map(g=>g.name))||[];O(ke),C(a),T(d?"same_day":"different_day"),w(!0)}}catch(a){console.error("[Workout] Error checking in-progress workout:",a)}}async function oe(){u&&(w(!1),f("/workout-session",{state:{program:r,dayIndex:m,resumeWorkoutId:u.id,resumeExerciseIndex:u.current_exercise_index,resumeSetNumber:u.current_set,completedSets:E}}))}async function de(){u&&(await B(u.id),w(!1),C(null),f("/workout-session",{state:{program:r,dayIndex:m,mergeExercises:p}}))}async function M(){var s,t;if(!(!u||!y)){for(const n of p){const l=(t=(s=r==null?void 0:r.weekly_schedule)==null?void 0:s.flatMap(o=>o.exercises||[]))==null?void 0:t.find(o=>o.name===n),a=(l==null?void 0:l.pattern)||(l==null?void 0:l.type)||"compound";await Le(y,n,a,{programId:u.program_id||void 0,skipReason:"other",dayName:u.day_name})}await B(u.id),w(!1),C(null),O([]),console.log(`[Workout] Logged ${p.length} exercises as skipped`)}}async function ce(){try{const{data:{user:s}}=await S.auth.getUser();if(s){ne(s.id),console.log("[WORKOUT] User authenticated, loading from Supabase...");const{data:n,error:l}=await S.from("training_programs").select("*").eq("user_id",s.id).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).single();if(!l&&n){console.log("[WORKOUT] ‚úÖ Loaded from Supabase:",n.id);const a=X(n);if(a){const o={id:a.id,name:a.name||"Il Tuo Programma",description:a.description||"",weekly_schedule:a.weekly_split.days.map(i=>({dayName:i.dayName||`Giorno ${i.dayIndex+1}`,dayType:i.dayType,muscleGroups:i.muscleGroups,runningSession:i.runningSession,exercises:i.exercises.filter(d=>d&&d.name).map(d=>{var x;return{name:d.name,pattern:d.pattern,sets:d.sets||3,reps:((x=d.reps)==null?void 0:x.toString())||"10",rest:typeof d.rest=="number"?d.rest:U(d.rest)||90,notes:d.notes||"",type:"standard",intensity:d.intensity,weight:d.weight,targetRir:d.targetRir,videoUrl:d.videoUrl,alternatives:d.alternatives,baseline:d.baseline}})}))};_(o),console.log("[WORKOUT] ‚úÖ Program normalized and formatted:",{days:o.weekly_schedule.length,totalExercises:o.weekly_schedule.reduce((i,d)=>i+d.exercises.length,0)})}else console.warn("[WORKOUT] Normalization returned null");j(!1);return}else console.warn("[WORKOUT] Supabase load failed:",l==null?void 0:l.message)}const t=localStorage.getItem("currentProgram");if(t){console.log("[WORKOUT] ‚ö†Ô∏è Loading from localStorage (fallback)");const n=JSON.parse(t),l=X(n);if(l){const a={id:l.id,name:l.name||"Il Tuo Programma",description:l.description||"",weekly_schedule:l.weekly_split.days.map(o=>({dayName:o.dayName||`Giorno ${o.dayIndex+1}`,dayType:o.dayType,muscleGroups:o.muscleGroups,runningSession:o.runningSession,exercises:o.exercises.filter(i=>i&&i.name).map(i=>{var d;return{name:i.name,pattern:i.pattern,sets:i.sets||3,reps:((d=i.reps)==null?void 0:d.toString())||"10",rest:typeof i.rest=="number"?i.rest:U(i.rest)||90,notes:i.notes||"",type:"standard",intensity:i.intensity,weight:i.weight,targetRir:i.targetRir,videoUrl:i.videoUrl,alternatives:i.alternatives,baseline:i.baseline}})}))};_(a)}j(!1);return}console.log("[WORKOUT] No program found in Supabase or localStorage"),j(!1)}catch(s){console.error("[WORKOUT] Error:",s),j(!1)}}function U(s){if(typeof s=="number")return s;if(!s)return 90;if(s.includes("-")&&s.includes("min")){const[t,n]=s.replace("min","").split("-").map(l=>parseInt(l.trim()));return(t+n)/2*60}return s.includes("s")?parseInt(s.replace("s","")):s.includes("min")?parseInt(s.replace("min",""))*60:90}function me(){var t,n,l;const s=localStorage.getItem("onboarding_data");if(s){const a=JSON.parse(s);if((t=a.running)!=null&&t.enabled||(n=a.runningInterest)!=null&&n.enabled)return!0}return((l=r==null?void 0:r.weekly_schedule)==null?void 0:l.some(a=>a.type==="running"))||!1}function ue(){var t;const s=(t=r==null?void 0:r.weekly_schedule)==null?void 0:t[m];return(s==null?void 0:s.exercises)&&s.exercises.length>0}function xe(){const s=me(),t=ue();if(console.log("[Workout] hasRunning:",s,"hasStrength:",t),s&&t){k(!0);return}if(s&&!t){A();return}L()}function L(){var t;k(!1);const s=(t=r==null?void 0:r.weekly_schedule)==null?void 0:t[m];if(!(s!=null&&s.exercises)||s.exercises.length===0){console.warn("[Workout] Day has no exercises"),P.error("Nessun esercizio programmato per oggi");return}R(!0)}function A(){var t;k(!1);const s=(t=r==null?void 0:r.weekly_schedule)==null?void 0:t[m];if(s!=null&&s.runningSession)v(!0);else{const n=localStorage.getItem("onboarding_data");let l=null;if(n){const o=JSON.parse(n);l=o.running||o.runningInterest}const a={type:(l==null?void 0:l.goal)==="base_aerobica"?"easy_run":"interval",targetDuration:30,warmup:{duration:5,description:"Camminata veloce o corsa leggera"},mainWork:(l==null?void 0:l.goal)==="base_aerobica"?{type:"continuous",duration:20,intensity:"easy",targetHR:"120-140"}:{type:"intervals",sets:6,workDuration:60,restDuration:90,intensity:"moderate"},cooldown:{duration:5,description:"Camminata di defaticamento"},notes:"Sessione di corsa"};if(r){const o=[...r.weekly_schedule];o[m]={...o[m],runningSession:a},_({...r,weekly_schedule:o})}v(!0)}}async function ge(s){console.log("[Workout] Running session completed:",s);try{const{data:{user:t}}=await S.auth.getUser();if(t&&r){const n=r.weekly_schedule[m],{error:l}=await S.from("workout_logs").insert({user_id:t.id,program_id:r.id,day_name:(n==null?void 0:n.dayName)||`Running Day ${m+1}`,split_type:"running",session_rpe:s.rpe,session_duration_minutes:s.actualDuration,completed:s.completed,exercises_completed:1,total_exercises:1,notes:[s.notes,s.distance?`Distanza: ${s.distance} km`:null,s.avgHeartRate?`FC media: ${s.avgHeartRate} bpm`:null,s.feltEasy?"Sessione percepita facile":null].filter(Boolean).join(" | ")||null});l?(console.error("[Workout] Error saving running session:",l),P.error("Errore nel salvataggio")):P.success("Sessione running salvata!")}}catch(t){console.error("[Workout] Error in handleRunningComplete:",t)}v(!1),f("/dashboard")}function he(){v(!1)}async function $(s){ee(s),R(!1);try{const t=pe(s);f("/workout-session",{state:{program:r,dayIndex:m,adjustment:t,recoveryData:s}})}catch(t){console.error("Error:",t),alert(h("workout.error_loading"))}}function pe(s){console.log("üîç RECOVERY DATA:",s);let t=1,n=1,l=1,a="standard";const o=[],i=[],d=s.availableTime||45;if(d<=20?(a="express",t*=.5,l=.6,i.push("‚ö° Express 20min: solo esercizi principali, pause ridotte")):d<=30?(a="reduced",t*=.7,l=.8,i.push("üèÉ Veloce 30min: esercizi ridotti, pause brevi")):d>=75?(a="extended",t*=1.15,i.push("üèãÔ∏è Lungo 90min+: allenamento completo con accessori")):d>=60&&(a="full",t*=1.1,i.push("üî• Completo 60min: tutti gli esercizi")),s.sleepHours<6&&(t=.8,i.push("Sonno insufficiente: volume ridotto 20%")),s.sleepHours<5&&(t=.7,n=.9,i.push("Sonno molto insufficiente: volume -30%, intensit√† -10%")),s.stressLevel>=8?(n=.8,t=.85,i.push("Stress elevato: intensit√† -20%, volume -15%")):s.stressLevel>=6&&(n=.9,i.push("Stress moderato: intensit√† -10%")),s.hasInjury&&s.injuryDetails){t*=.85,n*=.85,i.push(`Dolore rilevato (${s.injuryDetails}): riduzione 15%`);const x=s.injuryDetails.toLowerCase();(x.includes("spalla")||x.includes("shoulder"))&&o.push("Military Press","Shoulder Press","Alzate Laterali","Push Press"),(x.includes("schiena")||x.includes("back")||x.includes("dorso"))&&o.push("Stacco","Deadlift","Good Morning","Row Pesante"),(x.includes("ginocchio")||x.includes("knee"))&&o.push("Squat","Leg Press","Lunge","Jump Squat"),(x.includes("polso")||x.includes("wrist"))&&o.push("Push Press","Military Press")}return s.isFemale&&s.menstrualCycle==="luteal"&&(t*=.9,i.push("Fase luteale: volume -10%")),s.isFemale&&s.menstrualCycle==="menstruation"&&(t*=.8,i.push("Fase mestruazione: volume -20%")),s.isFemale&&s.menstrualCycle==="menopause"&&(t*=.95,n*=.95,i.push("Programma menopausa: focus resistenza e densit√† ossea")),console.log("üìä MULTIPLIER:",{volumeMultiplier:t,intensityMultiplier:n,restMultiplier:l,exerciseMode:a}),{volumeMultiplier:Math.max(.5,t),intensityMultiplier:Math.max(.7,n),restMultiplier:l,exerciseMode:a,skipExercises:o,recommendation:fe(t,n,i)}}function fe(s,t,n){let l="";return s<.75||t<.75?l="üî¥ Seduta leggera - Recupero attivo consigliato":s<.9||t<.9?l="üü° Seduta moderata - Ascolta il tuo corpo":l="üü¢ Seduta normale - Vai forte! üí™",n.length>0?l+" | "+n[0]:l}function be(s){var t;return((t=b[s])==null?void 0:t.name)||s}function ye(s,t){const n=b[s];return n!=null&&n.suggestedReps?n.suggestedReps:t}function je(s,t,n){z(l=>({...l,[s]:{name:t,suggestedWeight:n==null?void 0:n.weightDisplay,suggestedReps:(n==null?void 0:n.reps)||void 0}})),W(null)}function Ne(s){z(t=>{const n={...t};return delete n[s],n})}function we(s){W(N===s?null:s)}if(Y)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-gray-700 border-t-emerald-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300 font-medium",children:h("workout.loading")})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 rounded-xl p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-4",children:h("dashboard.no_program")}),e.jsx("p",{className:"text-gray-300 mb-6",children:h("dashboard.no_program_desc")}),e.jsx("button",{onClick:()=>f("/dashboard"),className:"bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-3 rounded-lg font-semibold",children:h("dashboard.back_to_dashboard")})]})})});if(!r.weekly_schedule||r.weekly_schedule.length===0)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 to-gray-800",children:e.jsx("p",{className:"text-xl text-gray-300",children:"Nessun programma disponibile"})});const G=r.weekly_schedule[m];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-4 md:p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto w-full overflow-x-hidden",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-5xl font-bold bg-gradient-to-r from-emerald-400 to-emerald-600 bg-clip-text text-transparent mb-2",children:r.name}),e.jsx("p",{className:"text-gray-400 text-base md:text-lg",children:r.description})]}),e.jsx("div",{className:"flex gap-2 mb-6 md:mb-8 overflow-x-auto pb-4 scrollbar-hide",children:r.weekly_schedule.map((s,t)=>e.jsx("button",{onClick:()=>Q(t),className:`px-6 py-3 rounded-lg font-semibold whitespace-nowrap transition-all ${m===t?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/50":"bg-gray-800/50 text-gray-400 hover:bg-gray-700/50"}`,children:s.dayName},t))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-4 md:mb-6",children:G.dayName}),G.exercises.map((s,t)=>{var n,l;return e.jsx("div",{children:s.type==="giant_set"?e.jsxs("div",{className:"bg-gradient-to-r from-orange-900/30 to-red-900/30 border border-orange-500/50 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-orange-500/20 p-2 rounded-lg",children:e.jsx(_e,{className:"w-6 h-6 text-orange-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-orange-400",children:s.name}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[s.rounds," giri ‚Ä¢ ",s.restBetweenRounds,"s recupero tra i giri"]})]})]}),e.jsx("div",{className:"space-y-3 mb-4",children:(n=s.exercises)==null?void 0:n.map((a,o)=>e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-4 border-l-4 border-emerald-500",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-bold text-white text-lg",children:[o+1,". ",a.name]}),e.jsxs("span",{className:"text-emerald-400 font-bold",children:[a.reps," reps"]})]}),a.notes&&e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:a.notes}),a.muscleGroup&&e.jsxs("span",{className:"inline-block bg-blue-500/20 text-blue-400 text-xs px-2 py-1 rounded",children:["üéØ ",a.muscleGroup]}),a.tempo&&e.jsxs("span",{className:"inline-block bg-purple-500/20 text-purple-400 text-xs px-2 py-1 rounded ml-2",children:["‚è±Ô∏è ",a.tempo]})]},o))}),s.totalNotes&&e.jsx("div",{className:"bg-yellow-900/20 border border-yellow-600/50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Re,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-yellow-300",children:s.totalNotes})]})})]}):e.jsxs("div",{className:"bg-gray-800/50 border border-emerald-500/30 rounded-xl p-4 md:p-6 hover:border-emerald-500/60 transition-all",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg md:text-2xl font-bold text-white break-words",children:be(s.name)}),b[s.name]&&e.jsxs("span",{className:"bg-blue-500/20 text-blue-400 text-xs px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),"Sostituito"]})]}),s.notes&&e.jsx("p",{className:"text-gray-400 text-sm",children:s.notes})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.weight&&e.jsx("div",{className:"bg-emerald-500/20 px-4 py-2 rounded-lg",children:e.jsxs("span",{className:"text-emerald-400 font-bold text-lg",children:[s.weight,"kg"]})}),Me(s.name)&&e.jsx("button",{onClick:()=>we(t),className:`p-2 rounded-lg transition-all ${N===t?"bg-orange-500/20 text-orange-400":"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50 hover:text-white"}`,title:"Postazione occupata? Cambia esercizio",children:e.jsx(K,{className:`w-5 h-5 ${N===t?"animate-spin":""}`})})]})]}),N===t&&e.jsxs("div",{className:"mb-4 bg-gray-900/70 rounded-lg p-4 border border-orange-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(I,{className:"w-5 h-5 text-orange-400"}),e.jsx("span",{className:"text-orange-400 font-semibold text-sm",children:"Postazione occupata? Scegli un'alternativa:"})]}),e.jsxs("div",{className:"space-y-2",children:[Ue(s.name,s.weight,s.reps,!0).map((a,o)=>e.jsxs("button",{onClick:()=>je(s.name,a.name,a.suggested),className:"w-full flex items-center justify-between p-3 bg-gray-800/80 hover:bg-gray-700/80 rounded-lg transition-all group",children:[e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-white font-medium group-hover:text-emerald-400 transition-colors",children:a.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.notes&&e.jsx("span",{className:"text-gray-500 text-xs",children:a.notes})}),a.suggested&&e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:"text-emerald-400 text-sm font-medium",children:a.suggested.weightDisplay}),a.suggested.reps>0&&e.jsxs("span",{className:"text-gray-400 text-sm",children:["√ó ",a.suggested.repsDisplay]}),e.jsx("span",{className:"text-gray-600 text-xs italic",children:"(RIR per calibrare)"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${a.equipment==="gym"?"bg-purple-500/20 text-purple-400":a.equipment==="bodyweight"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:a.equipment==="gym"?"Attrezzi":a.equipment==="bodyweight"?"Corpo libero":"Entrambi"}),e.jsx(Ce,{className:"w-4 h-4 text-gray-500 group-hover:text-emerald-400 rotate-[-90deg]"})]})]},o)),b[s.name]&&e.jsxs("button",{onClick:()=>Ne(s.name),className:"w-full flex items-center justify-center gap-2 p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded-lg text-gray-400 hover:text-white transition-all text-sm",children:[e.jsx(De,{className:"w-4 h-4"}),"Torna all'originale (",s.name,")"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-4",children:[e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-2 md:p-4 text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-1",children:"Serie"}),e.jsx("p",{className:"text-white font-bold text-lg md:text-xl",children:s.sets})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-2 md:p-4 text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-1",children:"Reps"}),e.jsx("p",{className:"text-white font-bold text-lg md:text-xl",children:ye(s.name,s.reps)})]}),e.jsxs("div",{className:"bg-gray-900/50 rounded-lg p-2 md:p-4 text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-1",children:"Rest"}),e.jsxs("p",{className:"text-white font-bold text-lg md:text-xl",children:[s.rest,"s"]})]})]}),((l=b[s.name])==null?void 0:l.suggestedWeight)&&e.jsx("div",{className:"mt-3 bg-emerald-500/10 border border-emerald-500/30 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("span",{className:"text-emerald-400 font-medium",children:["Peso suggerito: ",b[s.name].suggestedWeight]})]}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Usa RIR 2-3 per calibrare"})]})})]})},t)})]}),e.jsxs("div",{className:"mt-6 md:mt-8 flex flex-col sm:flex-row gap-3 md:gap-4",children:[e.jsx("button",{onClick:()=>f("/dashboard"),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-6 md:px-8 py-3 md:py-4 rounded-lg font-semibold text-base md:text-lg",children:h("dashboard.back_to_dashboard")}),e.jsx("button",{onClick:xe,className:"flex-1 bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white px-6 md:px-8 py-3 md:py-4 rounded-lg font-semibold text-base md:text-lg shadow-lg shadow-emerald-500/50",children:h("dashboard.start_workout")})]})]}),re&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-gradient-to-b from-slate-800 to-slate-900 rounded-2xl p-6 max-w-md w-full border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Cosa vuoi fare oggi?"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Scegli il tipo di allenamento"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:L,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white p-6 rounded-xl flex items-center gap-4 transition-all duration-200 active:scale-[0.98] shadow-lg shadow-blue-500/30",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/30 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(I,{className:"w-8 h-8 text-blue-200"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-xl font-bold block",children:"Pesi"}),e.jsx("span",{className:"text-blue-200 text-sm",children:"Allenamento di forza"})]})]}),e.jsxs("button",{onClick:A,className:"w-full bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-500 hover:to-emerald-600 text-white p-6 rounded-xl flex items-center gap-4 transition-all duration-200 active:scale-[0.98] shadow-lg shadow-emerald-500/30",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-500/30 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ie,{className:"w-8 h-8 text-emerald-200"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-xl font-bold block",children:"Corsa"}),e.jsx("span",{className:"text-emerald-200 text-sm",children:"Sessione cardio"})]})]})]}),e.jsx("button",{onClick:()=>k(!1),className:"w-full mt-6 py-3 text-slate-400 hover:text-white transition-colors",children:"Annulla"})]})}),le&&((q=(F=r==null?void 0:r.weekly_schedule)==null?void 0:F[m])==null?void 0:q.runningSession)&&e.jsx($e,{session:r.weekly_schedule[m].runningSession,dayName:r.weekly_schedule[m].dayName||`Giorno ${m+1}`,onComplete:ge,onCancel:he}),Z&&e.jsx(Ae,{onComplete:$,onSkip:()=>{R(!1),$({sleepHours:7,stressLevel:5,hasInjury:!1,injuryDetails:null,menstrualCycle:null,availableTime:45,isFemale:!1,timestamp:new Date().toISOString()})}}),te&&u&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-gradient-to-b from-slate-800 to-slate-900 rounded-2xl p-6 max-w-md w-full border border-slate-700 shadow-2xl",children:ae==="same_day"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-emerald-500/20 rounded-full flex items-center justify-center mb-3",children:e.jsx(J,{className:"w-8 h-8 text-emerald-400"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Workout in corso"}),e.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Hai un workout iniziato oggi che non hai completato"})]}),e.jsxs("div",{className:"bg-slate-700/50 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-400",children:"Giorno:"}),e.jsx("span",{className:"text-white font-semibold",children:u.day_name})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-slate-400",children:"Progresso:"}),e.jsxs("span",{className:"text-emerald-400 font-semibold",children:[u.exercises_completed,"/",u.total_exercises," esercizi"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Set completati:"}),e.jsx("span",{className:"text-white",children:E.length})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:oe,className:"flex-1 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"Riprendi"]}),e.jsxs("button",{onClick:M,className:"flex-1 py-3 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),"Abbandona"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-amber-500/20 rounded-full flex items-center justify-center mb-3",children:e.jsx(Pe,{className:"w-8 h-8 text-amber-400"})}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Workout non completato"}),e.jsxs("p",{className:"text-slate-400 text-sm mt-2",children:["Hai ",p.length," esercizi non completati da ",u.day_name]})]}),e.jsxs("div",{className:"bg-slate-700/50 rounded-xl p-4 mb-4",children:[e.jsx("p",{className:"text-slate-300 text-sm font-semibold mb-2",children:"Esercizi mancanti:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.slice(0,5).map((s,t)=>e.jsx("span",{className:"px-2 py-1 bg-amber-500/20 text-amber-300 rounded-lg text-xs",children:s},t)),p.length>5&&e.jsxs("span",{className:"px-2 py-1 bg-slate-600 text-slate-400 rounded-lg text-xs",children:["+",p.length-5," altri"]})]})]}),e.jsx("p",{className:"text-slate-400 text-sm mb-4 text-center",children:"Vuoi aggiungere questi esercizi alla seduta di oggi?"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:de,className:"w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"S√¨, accorpa alla seduta di oggi"]}),e.jsxs("button",{onClick:M,className:"w-full py-3 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),"No, salta (conta come skip)"]})]}),e.jsx("p",{className:"text-slate-500 text-xs text-center mt-4",children:"Se salti, gli esercizi verranno conteggiati per il tracking pattern"})]})})})]})}export{Qe as default};
