import{j as n}from"./vendor-ui-B5xs3EUI.js";import{a,u as N,e as C}from"./vendor-react-DLKD8xKB.js";import{S as h}from"./ScreeningFlowFull-BNU6DU2t.js";import{W as U}from"./WarmupGuide-CrjsEtVJ.js";import"./card-BbERCm1Z.js";import"./utils-BykweIWy.js";import"./clsx-B-dksMZM.js";import"./index-CsHuaFST.js";import"./vendor-supabase-DF1H9KNm.js";import"./bodyCompositionScoring-Cp0LER6O.js";function k(){const[i,c]=a.useState(null),[u,m]=a.useState(null),[p,r]=a.useState(!0),[d,s]=a.useState(!0),[w,g]=a.useState(!1),S=N(),l=C();a.useEffect(()=>{var o;f();const e=((o=l.state)==null?void 0:o.manualEntry)===!0;g(e);const t=sessionStorage.getItem("warmup_completed");(e||t==="true"||t==="skipped")&&(s(!1),e&&console.log("[SCREENING-FULL] Manual entry mode - skipping warmup"))},[l.state]);const f=async()=>{try{let e=localStorage.getItem("userId");e||(e="test-"+Date.now(),localStorage.setItem("userId",e)),c(e);const t=localStorage.getItem("onboarding_data");if(t){const o=JSON.parse(t);m(o),console.log("[SCREENING-FULL] Loaded onboarding data:",o),console.log("[SCREENING-FULL] Training location:",o.trainingLocation)}else console.warn("[SCREENING-FULL] No onboarding_data found in localStorage");r(!1)}catch(e){console.error("[SCREENING-FULL] Error:",e),r(!1)}},E=async e=>{console.log("[SCREENING-FULL] Assessment completed, navigating to dashboard"),console.log("[SCREENING-FULL] Data:",e);const t={...e,screeningType:"thorough",testCount:4};localStorage.setItem("screening_data",JSON.stringify(t)),setTimeout(()=>{S("/dashboard")},150)},I=()=>{sessionStorage.setItem("warmup_completed","true"),s(!1)},L=()=>{sessionStorage.setItem("warmup_completed","skipped"),s(!1)};return p?n.jsx("div",{children:"Caricamento..."}):d?n.jsx(U,{onComplete:I,onSkip:L}):n.jsx(h,{onComplete:E,userData:u,userId:i})}export{k as default};
