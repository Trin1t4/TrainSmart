import{j as e,D as z,b as L,aS as N,F,r as h,A as $,q as D,W as E}from"./vendor-ui-B5xs3EUI.js";import{a as m}from"./vendor-react-DLKD8xKB.js";import{C as p,c as u,a as W,b as V}from"./card-BbERCm1Z.js";import{u as I,$ as K}from"./index-CsHuaFST.js";import{a8 as y,ag as T,a9 as v,aa as k,ab as w,ac as S,af as C,ae as M,ad as B}from"./LineChart-BlBDR0Gt.js";import{B as _}from"./BarChart-yvnJK2nz.js";import"./utils-BykweIWy.js";import"./clsx-B-dksMZM.js";import"./vendor-supabase-DF1H9KNm.js";function G(){const[s,a]=m.useState(null),[t,i]=m.useState([]),[r,o]=m.useState([]),[n,d]=m.useState(12),[b,c]=m.useState(!0);m.useEffect(()=>{x()},[n]);const x=async()=>{c(!0);try{const f=await(await fetch("/api/stats")).json();a(f);const P=(await(await fetch(`/api/stats/weekly?weeks=${n}`)).json()).map(j=>({week:new Date(j.weekStart).toLocaleDateString("it-IT",{day:"2-digit",month:"short"}),workouts:j.totalWorkouts,volume:Math.round(parseFloat(j.totalVolume)),sets:j.totalSets,reps:j.totalReps}));i(P);const A=await(await fetch("/api/prs")).json();o(A.slice(0,10))}catch(l){console.error("Error loading progress data:",l)}finally{c(!1)}};return b?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500"})}):e.jsx("div",{className:"min-h-screen bg-slate-950 text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"I Tuoi Progressi"}),e.jsx("p",{className:"text-slate-400",children:"Analisi delle tue performance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(g,{icon:e.jsx(z,{className:"w-6 h-6"}),label:"Workout Totali",value:(s==null?void 0:s.totalWorkouts)||0,color:"emerald"}),e.jsx(g,{icon:e.jsx(L,{className:"w-6 h-6"}),label:"Volume Totale",value:`${((s==null?void 0:s.totalVolume)||0).toLocaleString()} kg`,color:"blue"}),e.jsx(g,{icon:e.jsx(N,{className:"w-6 h-6"}),label:"Personal Records",value:(s==null?void 0:s.totalPRs)||0,color:"amber"}),e.jsx(g,{icon:e.jsx(F,{className:"w-6 h-6"}),label:"Streak Giorni",value:(s==null?void 0:s.currentStreak)||0,color:"orange"})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:[4,8,12,26].map(l=>e.jsxs("button",{onClick:()=>d(l),className:`px-4 py-2 rounded-lg transition-colors ${n===l?"bg-emerald-600 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[l," settimane"]},l))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-slate-900 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Volume Settimanale (kg)"}),e.jsx(y,{width:"100%",height:300,children:e.jsxs(T,{data:t,children:[e.jsx(v,{strokeDasharray:"3 3",stroke:"#334155"}),e.jsx(k,{dataKey:"week",stroke:"#94a3b8",style:{fontSize:12}}),e.jsx(w,{stroke:"#94a3b8",style:{fontSize:12}}),e.jsx(S,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),e.jsx(C,{type:"monotone",dataKey:"volume",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:4},activeDot:{r:6}})]})})]}),e.jsxs("div",{className:"bg-slate-900 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Workout per Settimana"}),e.jsx(y,{width:"100%",height:300,children:e.jsxs(_,{data:t,children:[e.jsx(v,{strokeDasharray:"3 3",stroke:"#334155"}),e.jsx(k,{dataKey:"week",stroke:"#94a3b8",style:{fontSize:12}}),e.jsx(w,{stroke:"#94a3b8",style:{fontSize:12}}),e.jsx(S,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),e.jsx(M,{dataKey:"workouts",fill:"#3b82f6",radius:[8,8,0,0]})]})})]}),e.jsxs("div",{className:"bg-slate-900 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Set e Ripetizioni"}),e.jsx(y,{width:"100%",height:300,children:e.jsxs(T,{data:t,children:[e.jsx(v,{strokeDasharray:"3 3",stroke:"#334155"}),e.jsx(k,{dataKey:"week",stroke:"#94a3b8",style:{fontSize:12}}),e.jsx(w,{stroke:"#94a3b8",style:{fontSize:12}}),e.jsx(S,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),e.jsx(B,{}),e.jsx(C,{type:"monotone",dataKey:"sets",stroke:"#f59e0b",strokeWidth:2,name:"Set"}),e.jsx(C,{type:"monotone",dataKey:"reps",stroke:"#ec4899",strokeWidth:2,name:"Ripetizioni"})]})})]}),e.jsxs("div",{className:"bg-slate-900 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Personal Records"}),e.jsx(N,{className:"w-5 h-5 text-amber-500"})]}),r.length===0?e.jsxs("div",{className:"text-center py-12 text-slate-500",children:[e.jsx(N,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Nessun PR ancora"}),e.jsx("p",{className:"text-sm",children:"Completa i tuoi primi workout!"})]}):e.jsx("div",{className:"space-y-3 max-h-[260px] overflow-y-auto",children:r.map(l=>e.jsx("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:l.exerciseName}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(l.achievedAt).toLocaleDateString("it-IT")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-500",children:parseFloat(l.value).toFixed(1)}),e.jsx("p",{className:"text-xs text-slate-400 uppercase",children:l.recordType})]})]})},l.id))})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 to-blue-600 rounded-xl p-6 text-white",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(R,{label:"Media Workout/Settimana",value:H(t)}),e.jsx(R,{label:"Volume Medio/Workout",value:`${O(t)} kg`}),e.jsx(R,{label:"Crescita Volume",value:U(t)})]})]})]})})}function g({icon:s,label:a,value:t,color:i}){const r={emerald:"bg-emerald-600",blue:"bg-blue-600",amber:"bg-amber-600",orange:"bg-orange-600"};return e.jsxs("div",{className:"bg-slate-900 rounded-xl p-6 border border-slate-800",children:[e.jsx("div",{className:`w-12 h-12 ${r[i]} rounded-xl flex items-center justify-center mb-4`,children:s}),e.jsx("p",{className:"text-slate-400 text-sm mb-1",children:a}),e.jsx("p",{className:"text-2xl font-bold",children:t})]})}function R({label:s,value:a}){return e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 backdrop-blur",children:[e.jsx("p",{className:"text-sm opacity-90 mb-1",children:s}),e.jsx("p",{className:"text-2xl font-bold",children:a})]})}function H(s){return s.length===0?"0":(s.reduce((t,i)=>t+i.workouts,0)/s.length).toFixed(1)}function O(s){if(s.length===0)return"0";const a=s.filter(r=>r.workouts>0);if(a.length===0)return"0";const t=a.reduce((r,o)=>r+o.volume,0),i=a.reduce((r,o)=>r+o.workouts,0);return Math.round(t/i).toLocaleString()}function U(s){if(s.length<2)return"+0%";const a=s.slice(0,Math.floor(s.length/2)),t=s.slice(Math.floor(s.length/2)),i=a.reduce((n,d)=>n+d.volume,0)/a.length,o=(t.reduce((n,d)=>n+d.volume,0)/t.length-i)/i*100;return`${o>0?"+":""}${o.toFixed(0)}%`}function ie(){var o,n,d,b;const{t:s}=I(),{data:a}=K(),[t,i]=m.useState(null);m.useEffect(()=>{const c=localStorage.getItem("screening_data");c&&i(JSON.parse(c))},[]);const r={totalWorkouts:((n=(o=a==null?void 0:a.weekly_split)==null?void 0:o.days)==null?void 0:n.length)||0,currentStreak:0,weeklyVolume:0};return(d=a==null?void 0:a.weekly_split)!=null&&d.days&&a.weekly_split.days.forEach(c=>{var x;(x=c.exercises)==null||x.forEach(l=>{if(l.sets&&l.reps){const f=typeof l.reps=="string"?parseInt(l.reps.split("-")[0]):l.reps;r.weeklyVolume+=l.sets*f}})}),e.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-4 md:p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6",children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-display font-bold mb-2",children:"Statistiche"}),e.jsx("p",{className:"text-slate-400 text-sm md:text-base",children:"Monitora i tuoi progressi"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4 mb-6",children:[e.jsx(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},children:e.jsx(p,{className:"bg-gradient-to-br from-emerald-900/40 to-emerald-800/20 border-emerald-700/50",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:e.jsx($,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-emerald-300/60",children:"Workout/Sett"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-emerald-400",children:r.totalWorkouts})]})]})})})}),e.jsx(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},children:e.jsx(p,{className:"bg-gradient-to-br from-blue-900/40 to-blue-800/20 border-blue-700/50",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(D,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-300/60",children:"Volume Sett"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-blue-400",children:r.weeklyVolume.toLocaleString()})]})]})})})}),e.jsx(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},children:e.jsx(p,{className:"bg-gradient-to-br from-purple-900/40 to-purple-800/20 border-purple-700/50",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(E,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-300/60",children:"Streak"}),e.jsxs("p",{className:"text-xl md:text-2xl font-bold text-purple-400",children:[r.currentStreak," giorni"]})]})]})})})}),e.jsx(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:e.jsx(p,{className:"bg-gradient-to-br from-amber-900/40 to-amber-800/20 border-amber-700/50",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500/20 rounded-lg",children:e.jsx(N,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-amber-300/60",children:"Livello"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-amber-400",children:((b=t==null?void 0:t.level)==null?void 0:b.toUpperCase())||"-"})]})]})})})})]}),e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(p,{className:"bg-slate-800/60 border-slate-700/50",children:[e.jsx(W,{className:"p-4 md:p-6",children:e.jsxs(V,{className:"text-lg md:text-xl font-display flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-emerald-400"}),"Progressi"]})}),e.jsx(u,{className:"p-4 md:p-6 pt-0",children:a?e.jsx(G,{}):e.jsxs("div",{className:"text-center py-8 text-slate-400",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Genera un programma per vedere i progressi"})]})})]})}),(t==null?void 0:t.patternBaselines)&&e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-4",children:e.jsxs(p,{className:"bg-slate-800/60 border-slate-700/50",children:[e.jsx(W,{className:"p-4 md:p-6",children:e.jsx(V,{className:"text-lg md:text-xl font-display",children:"Baseline per Pattern"})}),e.jsx(u,{className:"p-4 md:p-6 pt-0",children:e.jsx("div",{className:"space-y-3",children:Object.entries(t.patternBaselines).map(([c,x])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-200",children:x.variantName||c}),e.jsx("p",{className:"text-xs text-slate-400",children:c.replace(/_/g," ")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:[x.reps," reps"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Difficolt√†: ",x.difficulty,"/10"]})]})]},c))})})]})})]})})}export{ie as default};
