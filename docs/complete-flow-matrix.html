<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TrainSmart - Matrice Completa Goal √ó Location</title>
  <style>
    :root {
      --bg: #0d1117;
      --bg-card: #161b22;
      --bg-darker: #0a0c10;
      --border: #30363d;
      --text: #e6edf3;
      --text-muted: #8b949e;
      --red: #f85149;
      --orange: #d29922;
      --yellow: #e3b341;
      --green: #3fb950;
      --blue: #58a6ff;
      --purple: #a371f7;
      --pink: #db61a2;
      --cyan: #39c5cf;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      padding: 2rem;
    }

    h1 {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, var(--blue), var(--purple), var(--pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      text-align: center;
      color: var(--text-muted);
      margin-bottom: 2rem;
    }

    /* Tab navigation */
    .tabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .tab {
      padding: 0.75rem 1.5rem;
      border: 2px solid var(--border);
      border-radius: 8px;
      background: transparent;
      color: var(--text);
      cursor: pointer;
      font-size: 1rem;
      transition: all 0.2s;
    }

    .tab:hover {
      background: var(--bg-card);
    }

    .tab.active {
      border-color: var(--purple);
      background: rgba(163, 113, 247, 0.1);
    }

    /* Content sections */
    .content {
      display: none;
    }

    .content.active {
      display: block;
    }

    /* Matrix table */
    .matrix {
      width: 100%;
      border-collapse: collapse;
      margin: 2rem 0;
      font-size: 0.9rem;
    }

    .matrix th,
    .matrix td {
      padding: 1rem;
      border: 1px solid var(--border);
      vertical-align: top;
    }

    .matrix th {
      background: var(--bg-darker);
      font-weight: 700;
      text-align: left;
    }

    .matrix th.center {
      text-align: center;
    }

    .matrix .goal-col {
      width: 150px;
      font-weight: 700;
    }

    .matrix .location-header {
      text-align: center;
    }

    /* Location colors */
    .loc-gym { background: rgba(88, 166, 255, 0.1); }
    .loc-home { background: rgba(63, 185, 80, 0.1); }
    .loc-homegym { background: rgba(163, 113, 247, 0.1); }

    /* Cell content */
    .cell-content {
      font-size: 0.85rem;
    }

    .cell-title {
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: var(--cyan);
    }

    .cell-file {
      font-family: monospace;
      font-size: 0.75rem;
      color: var(--yellow);
      margin: 0.25rem 0;
    }

    .cell-params {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.5rem;
    }

    .param {
      background: var(--bg-darker);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.75rem;
    }

    .param-label {
      color: var(--text-muted);
    }

    .param-value {
      color: var(--green);
      font-weight: 600;
    }

    /* Flow diagram */
    .flow-section {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 2rem;
      margin: 2rem 0;
    }

    .flow-title {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .flow-step {
      display: flex;
      align-items: flex-start;
      margin: 1rem 0;
      position: relative;
    }

    .flow-number {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--purple);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      flex-shrink: 0;
      margin-right: 1rem;
    }

    .flow-content {
      flex: 1;
      background: var(--bg-darker);
      padding: 1rem;
      border-radius: 8px;
      border-left: 3px solid var(--purple);
    }

    .flow-content h4 {
      margin-bottom: 0.5rem;
    }

    .flow-content code {
      background: rgba(0,0,0,0.3);
      padding: 0.1rem 0.4rem;
      border-radius: 4px;
      font-size: 0.85rem;
      color: var(--cyan);
    }

    .flow-branches {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1rem;
    }

    .branch-box {
      background: var(--bg-card);
      border-radius: 8px;
      padding: 1rem;
      border: 1px solid var(--border);
    }

    .branch-header {
      font-weight: 700;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .branch-file {
      font-family: monospace;
      font-size: 0.75rem;
      color: var(--green);
    }

    /* Connector line */
    .connector {
      width: 2px;
      height: 30px;
      background: var(--border);
      margin-left: 17px;
    }

    /* Summary cards */
    .summary-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin: 2rem 0;
    }

    .summary-card {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid var(--border);
    }

    .summary-card h3 {
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .summary-list {
      list-style: none;
    }

    .summary-list li {
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
    }

    .summary-list li:last-child {
      border-bottom: none;
    }

    /* Warning/Info boxes */
    .info-box {
      background: rgba(88, 166, 255, 0.1);
      border: 1px solid var(--blue);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .warning-box {
      background: rgba(248, 81, 73, 0.1);
      border: 1px solid var(--red);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .box-header {
      font-weight: 700;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Legend */
    .legend {
      display: flex;
      gap: 2rem;
      justify-content: center;
      margin: 2rem 0;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
    }
  </style>
</head>
<body>

<h1>üó∫Ô∏è Matrice Completa Goal √ó Location</h1>
<p class="subtitle">Tutti i percorsi del codice per ogni combinazione</p>

<div class="tabs">
  <button class="tab active" data-tab="overview">üìä Overview</button>
  <button class="tab" data-tab="gym">üèãÔ∏è Palestra (Gym)</button>
  <button class="tab" data-tab="home">üè† Casa (Home)</button>
  <button class="tab" data-tab="homegym">üè†üèãÔ∏è Home Gym</button>
  <button class="tab" data-tab="differences">üîÄ Differenze</button>
</div>

<!-- OVERVIEW -->
<div class="content active" id="overview">
  <div class="flow-section">
    <div class="flow-title">üå≥ Flusso Decision Tree</div>

    <div class="flow-step">
      <div class="flow-number">1</div>
      <div class="flow-content">
        <h4>üìç Location Selection</h4>
        <p>L'utente seleziona dove si allener√†. Questo determina QUALE funzione di calcolo volume verr√† usata.</p>
        <div class="flow-branches">
          <div class="branch-box loc-gym">
            <div class="branch-header">üèãÔ∏è Gym</div>
            <div class="branch-file">‚Üí calculateVolumeWeighted()</div>
            <p style="font-size: 0.8rem; margin-top: 0.5rem;">Modula CARICO e REPS</p>
          </div>
          <div class="branch-box loc-home">
            <div class="branch-header">üè† Home</div>
            <div class="branch-file">‚Üí calculateVolumeBodyweight()</div>
            <p style="font-size: 0.8rem; margin-top: 0.5rem;">Modula VARIANTE e REPS</p>
          </div>
          <div class="branch-box loc-homegym">
            <div class="branch-header">üè†üèãÔ∏è Home Gym</div>
            <div class="branch-file">‚Üí calculateVolumeWeighted()</div>
            <p style="font-size: 0.8rem; margin-top: 0.5rem;">Come Gym (ha pesi)</p>
          </div>
        </div>
      </div>
    </div>

    <div class="connector"></div>

    <div class="flow-step">
      <div class="flow-number">2</div>
      <div class="flow-content">
        <h4>üéØ Goal Selection</h4>
        <p>L'obiettivo determina i PARAMETRI specifici (reps, sets, rest, intensity).</p>
        <code>programGenerator.ts:2656</code> ‚Üí <code>if (goalLower === 'forza' || goalLower === 'strength')</code>
      </div>
    </div>

    <div class="connector"></div>

    <div class="flow-step">
      <div class="flow-number">3</div>
      <div class="flow-content">
        <h4>‚ö° DUP Distribution</h4>
        <p>La frequenza determina quanti HEAVY per giorno.</p>
        <code>weeklySplitGenerator.ts:648</code> ‚Üí <code>getIntensityForPattern()</code>
      </div>
    </div>

    <div class="connector"></div>

    <div class="flow-step">
      <div class="flow-number">4</div>
      <div class="flow-content">
        <h4>üìè Volume Calculation</h4>
        <p>Combina Location + Goal + DayType per calcolare parametri finali.</p>
      </div>
    </div>
  </div>

  <div class="legend">
    <div class="legend-item">
      <div class="legend-color" style="background: var(--blue);"></div>
      <span>Gym/Home Gym ‚Üí Weighted Logic</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background: var(--green);"></div>
      <span>Home ‚Üí Bodyweight Logic</span>
    </div>
  </div>
</div>

<!-- GYM -->
<div class="content" id="gym">
  <h2 style="margin-bottom: 1rem;">üèãÔ∏è Palestra (Gym) - calculateVolumeWeighted()</h2>

  <div class="info-box">
    <div class="box-header">‚ÑπÔ∏è Logica Weighted</div>
    <p>Con i pesi, si modula il CARICO. Meno reps = pi√π peso. Pi√π reps = meno peso.</p>
    <code>packages/shared/src/utils/programGenerator.ts:2638</code>
  </div>

  <table class="matrix">
    <thead>
      <tr>
        <th class="goal-col">Goal</th>
        <th class="center">üî¥ Heavy Day</th>
        <th class="center">üü† Moderate Day</th>
        <th class="center">üü¢ Volume Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="goal-col">üí™ FORZA</td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-title">Range FISSI</div>
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">3-5</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">4-6</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">3-5min</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">80-92%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">5-6</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">4-5</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">2-3min</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">75-80%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">8-10</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-4</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">90s-2min</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">70-75%</span></span>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td class="goal-col">üèãÔ∏è IPERTROFIA</td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-title">Da Baseline</div>
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">6-8</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-5</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">90-120s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">80-85%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">8-12</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-5</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">75-90s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">70-80%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">10-15</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">4-6</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">60-75s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">65-70%</span></span>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td class="goal-col">üî• DIMAGRIMENTO</td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">8-10</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-4</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">75-90s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">75-80%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">10-12</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-4</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">60-75s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">70-75%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">12-15</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">4-5</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">45-60s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">60-70%</span></span>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td class="goal-col">üèÉ RESISTENZA</td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">12-15</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-4</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">60s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">65-70%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">12-18</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-4</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">45-60s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">60-70%</span></span>
            </div>
          </div>
        </td>
        <td class="loc-gym">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">15-20</span></span>
              <span class="param"><span class="param-label">Sets:</span> <span class="param-value">3-5</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">30-45s</span></span>
              <span class="param"><span class="param-label">%1RM:</span> <span class="param-value">55-65%</span></span>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- HOME -->
<div class="content" id="home">
  <h2 style="margin-bottom: 1rem;">üè† Casa (Home) - calculateVolumeBodyweight()</h2>

  <div class="info-box">
    <div class="box-header">‚ÑπÔ∏è Logica Bodyweight</div>
    <p>Senza pesi, si modula la VARIANTE. Heavy = variante pi√π difficile. Volume = variante pi√π facile.</p>
    <code>packages/shared/src/utils/programGenerator.ts:2837</code>
  </div>

  <div class="warning-box">
    <div class="box-header">‚ö†Ô∏è DUP Bodyweight</div>
    <ul style="margin-left: 1rem; font-size: 0.9rem;">
      <li><strong>Heavy:</strong> Variante UPGRADED (es. Push-up ‚Üí Archer Push-up), reps √ó 0.70</li>
      <li><strong>Moderate:</strong> Variante BASE, reps √ó 1.00</li>
      <li><strong>Volume:</strong> Variante BASE, reps √ó 1.35, +1 set</li>
    </ul>
  </div>

  <table class="matrix">
    <thead>
      <tr>
        <th class="goal-col">Goal</th>
        <th class="center">üî¥ Heavy Day</th>
        <th class="center">üü† Moderate Day</th>
        <th class="center">üü¢ Volume Day</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="goal-col">üí™ FORZA</td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-title">Variante Difficile</div>
            <div class="cell-file">‚Üí getUpgradedExercise()</div>
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">3-6</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">2-3min</span></span>
              <span class="param"><span class="param-label">RPE:</span> <span class="param-value">8-9</span></span>
            </div>
          </div>
        </td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-title">Variante Base</div>
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">6-10</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">90s</span></span>
              <span class="param"><span class="param-label">RPE:</span> <span class="param-value">7-8</span></span>
            </div>
          </div>
        </td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-title">Accumulo Volume</div>
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">10-15</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">60-90s</span></span>
              <span class="param"><span class="param-label">RPE:</span> <span class="param-value">6-7</span></span>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td class="goal-col">üèãÔ∏è IPERTROFIA</td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">6-10</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">90-120s</span></span>
              <span class="param"><span class="param-label">Tempo:</span> <span class="param-value">3-1-2</span></span>
            </div>
          </div>
        </td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">8-15</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">75s</span></span>
            </div>
          </div>
        </td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">12-20</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">45-60s</span></span>
              <span class="param"><span class="param-label">Focus:</span> <span class="param-value">Pump</span></span>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td class="goal-col">üî• DIMAGRIMENTO</td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">10-15</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">60s</span></span>
            </div>
          </div>
        </td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">12-18</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">45s</span></span>
            </div>
          </div>
        </td>
        <td class="loc-home">
          <div class="cell-content">
            <div class="cell-params">
              <span class="param"><span class="param-label">Reps:</span> <span class="param-value">15-25</span></span>
              <span class="param"><span class="param-label">Rest:</span> <span class="param-value">30s</span></span>
              <span class="param"><span class="param-label">Focus:</span> <span class="param-value">Densit√†</span></span>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <div class="flow-section">
    <div class="flow-title">üîÑ File Specifici per Home</div>
    <ul style="margin-left: 1.5rem;">
      <li><code>exerciseProgression.ts</code> ‚Üí <code>getUpgradedExercise()</code> per Heavy Day</li>
      <li><code>exerciseVariants.ts</code> ‚Üí <code>getProgressedBodyweightVariant()</code></li>
      <li><code>locationAdapter.ts</code> ‚Üí <code>adaptExercisesForLocation()</code></li>
    </ul>
  </div>
</div>

<!-- HOME GYM -->
<div class="content" id="homegym">
  <h2 style="margin-bottom: 1rem;">üè†üèãÔ∏è Home Gym - calculateVolumeWeighted()</h2>

  <div class="info-box">
    <div class="box-header">‚ÑπÔ∏è Home Gym = Gym Logic</div>
    <p>Home Gym ha accesso ai pesi, quindi usa la stessa logica di Gym (<code>calculateVolumeWeighted</code>).</p>
    <code>location === 'gym' || location === 'home_gym'</code> ‚Üí <code>isWeightedTraining = true</code>
  </div>

  <div class="warning-box">
    <div class="box-header">‚ö†Ô∏è Differenze con Gym</div>
    <ul style="margin-left: 1rem; font-size: 0.9rem;">
      <li>Potrebbe mancare alcune macchine ‚Üí <code>convertToMachineVariant()</code> cerca alternative</li>
      <li>Attrezzatura limitata ‚Üí controlla <code>equipment</code> object</li>
      <li>Metabolic finisher potrebbe essere semplificato</li>
    </ul>
  </div>

  <p style="margin: 2rem 0; text-align: center; color: var(--text-muted);">
    I parametri sono IDENTICI alla tab "Palestra (Gym)" - stessa funzione <code>calculateVolumeWeighted()</code>
  </p>
</div>

<!-- DIFFERENCES -->
<div class="content" id="differences">
  <h2 style="margin-bottom: 1rem;">üîÄ Differenze Chiave tra Location</h2>

  <div class="summary-grid">
    <div class="summary-card">
      <h3>üèãÔ∏è Gym</h3>
      <ul class="summary-list">
        <li><span>Funzione</span><span style="color: var(--cyan);">calculateVolumeWeighted()</span></li>
        <li><span>Modulazione</span><span>Carico (kg)</span></li>
        <li><span>DUP Heavy</span><span>Meno reps, pi√π peso</span></li>
        <li><span>DUP Volume</span><span>Pi√π reps, meno peso</span></li>
        <li><span>Macchine</span><span>‚úÖ Disponibili</span></li>
        <li><span>Metabolic</span><span>Completo</span></li>
      </ul>
    </div>

    <div class="summary-card">
      <h3>üè† Home</h3>
      <ul class="summary-list">
        <li><span>Funzione</span><span style="color: var(--cyan);">calculateVolumeBodyweight()</span></li>
        <li><span>Modulazione</span><span>Variante esercizio</span></li>
        <li><span>DUP Heavy</span><span>Variante difficile</span></li>
        <li><span>DUP Volume</span><span>Variante base + reps</span></li>
        <li><span>Macchine</span><span>‚ùå N/A</span></li>
        <li><span>Metabolic</span><span>Bodyweight only</span></li>
      </ul>
    </div>

    <div class="summary-card">
      <h3>üè†üèãÔ∏è Home Gym</h3>
      <ul class="summary-list">
        <li><span>Funzione</span><span style="color: var(--cyan);">calculateVolumeWeighted()</span></li>
        <li><span>Modulazione</span><span>Carico (kg)</span></li>
        <li><span>DUP Heavy</span><span>Meno reps, pi√π peso</span></li>
        <li><span>DUP Volume</span><span>Pi√π reps, meno peso</span></li>
        <li><span>Macchine</span><span>‚ö†Ô∏è Limitate</span></li>
        <li><span>Metabolic</span><span>Adattato</span></li>
      </ul>
    </div>
  </div>

  <div class="flow-section">
    <div class="flow-title">üìÇ File Decision Point</div>
    <div class="cell-file" style="margin: 1rem 0;">packages/shared/src/utils/programGenerator.ts:2624</div>
    <pre style="background: var(--bg-darker); padding: 1rem; border-radius: 8px; overflow-x: auto; font-size: 0.85rem;">
<code>export function calculateVolume(
  baselineMaxReps: number,
  goal: string,
  level: string,
  location: 'gym' | 'home' | 'home_gym' = 'gym',
  dayType: 'heavy' | 'volume' | 'moderate' = 'moderate'
): VolumeResult {

  // Determina modalit√†: WEIGHTED vs BODYWEIGHT
  <span style="color: var(--green);">const isWeightedTraining = location === 'gym' || location === 'home_gym';</span>

  if (isWeightedTraining) {
    return <span style="color: var(--blue);">calculateVolumeWeighted</span>(baselineMaxReps, goal, level, dayType);
  } else {
    return <span style="color: var(--green);">calculateVolumeBodyweight</span>(baselineMaxReps, goal, level, dayType);
  }
}</code></pre>
  </div>
</div>

<script>
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
      tab.classList.add('active');
      document.getElementById(tab.dataset.tab).classList.add('active');
    });
  });
</script>

<footer style="text-align: center; padding: 2rem; color: var(--text-muted); font-size: 0.85rem;">
  TrainSmart ¬© 2024 - Matrice Completa Goal √ó Location<br>
  Bug fixes applied: goal normalization, missing aliases, totalWeeks coverage
</footer>

</body>
</html>
